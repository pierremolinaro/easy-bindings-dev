//---------------------------------------------------------------------------------------------------------------------*

import Cocoa

//---------------------------------------------------------------------------------------------------------------------*

extension PMManagedDocument {

  //-------------------------------------------------------------------------------------------------------------------*
  //  newInstanceOfEntityNamed                                                                                         *
  //-------------------------------------------------------------------------------------------------------------------*

  func newInstanceOfEntityNamed (inEntityTypeName : String) -> PMManagedObject? {
    var result : PMManagedObject?
    if let unwrappedUndoManager = undoManager {
%
for () in ENTITY_LIST
before
  %      %
do
  %if inEntityTypeName == "%!mEntityName%" {\n%
  %        result = %!mEntityName% (undoManager:unwrappedUndoManager)\n%
between
  %      }else %
after
  %      }\n%
end
%    }
    return result
  }
}

//---------------------------------------------------------------------------------------------------------------------*

