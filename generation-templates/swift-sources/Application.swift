//----------------------------------------------------------------------------------------------------------------------
//  THIS FILE IS GENERATED BY EASY BINDINGS, DO NOT MODIFY IT
//----------------------------------------------------------------------------------------------------------------------

import Cocoa

//----------------------------------------------------------------------------------------------------------------------

let LOG_OPERATION_DURATION = false

//----------------------------------------------------------------------------------------------------------------------

let WINDOW_HEIGHT_METADATADICTIONARY_KEY = "WindowHeight"
let WINDOW_WIDTH_METADATADICTIONARY_KEY  = "WindowWidth"

//----------------------------------------------------------------------------------------------------------------------

var gDebugMenuItemsAdded = false

//----------------------------------------------------------------------------------------------------------------------
//    EBEvent class
//----------------------------------------------------------------------------------------------------------------------

class EBEvent : EBObject {
  func postEvent () {} // Abstract method
}

//----------------------------------------------------------------------------------------------------------------------
//    A P P L I C A T I O N    C L A S S
//----------------------------------------------------------------------------------------------------------------------

@objc(EBApplication) final class EBApplication : NSApplication {

  @IBOutlet var mTransientEventExplorerWindow : NSWindow? = nil
  @IBOutlet var mTransientEventExplorerTextView : NSTextView? = nil
 
  //····················································································································

  override func awakeFromNib () {
    let menuItem = NSMenuItem (
      title: "Show Transient Event Log Window",
      action: #selector (showTransientEventLogWindow (sender:)),
      keyEquivalent: ""
    )
    addItemToDebugMenu (menuItem)
  }

  //····················································································································
 
  @objc func showTransientEventLogWindow (sender : Any?) {
    self.mTransientEventExplorerTextView?.string = ""
    self.mTransientEventExplorerWindow?.makeKeyAndOrderFront (sender)
  }
  
  //····················································································································
 
  @IBAction func clearTransientEventLogWindow (_ sender : Any?) {
    self.mTransientEventExplorerTextView?.string = ""
  }
  
  //····················································································································

  func appendToTransientEventLog (_ message : String) {
    if logEvents () {
      self.mTransientEventExplorerTextView?.appendMessageString (message, color: .blue)
    }
  }
  
  //····················································································································

  func logEvents () -> Bool {
    if Thread.isMainThread {
      return self.mTransientEventExplorerWindow?.isVisible ?? false
    }else{
      return false
    }
  }

  //····················································································································

  override func sendEvent (_ event: NSEvent) {
    super.sendEvent (event)
    flushModelEvents ()
    for doc in NSDocumentController.shared.documents {
      if let document = doc as? EBManagedXibDocument {
        document.updateReachableEntitiesPopUpButton ()
      }
    }
    flushOutletEvents ()
  }

  //····················································································································

}

//----------------------------------------------------------------------------------------------------------------------
