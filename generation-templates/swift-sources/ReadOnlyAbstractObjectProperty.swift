//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//  THIS FILE IS GENERATED BY EASY BINDINGS, DO NOT MODIFY IT
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import Cocoa

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//    ReadOnlyAbstractObjectProperty
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

class ReadOnlyAbstractObjectProperty <T : Hashable> : ReadOnlyAbstractGenericRelationshipProperty {

  //····················································································································
  // Abstract methods
  //····················································································································

  var prop : EBSelection < T? > { get { return .empty } }  // Abstract method

  //····················································································································

  var propval : T? { return nil } // Abstract method

  //····················································································································
  //  Internal value
  //····················································································································

  internal var mInternalValue : T? = nil {
    didSet {
      if self.mInternalValue != oldValue {
        if (self.mInternalValue == nil) != (oldValue == nil) {
          self.none_property.postEvent ()
        }
        self.postEvent ()
        self.notifyModelDidChangeFrom (oldValue: oldValue)
        self.notifyModelDidChange ()
      }
    }
  }

  //····················································································································

  internal func notifyModelDidChangeFrom (oldValue inOldValue : T?) {
  }

  //····················································································································
  //  none property
  //····················································································································

  final var none_property = EBTransientProperty_Bool ()

  final var none_property_selection : EBSelection <Bool> { return self.none_property.prop }

  //····················································································································
  //  init
  //····················································································································

  override init () {
    super.init ()
    self.none_property.mReadModelFunction = { [weak self] in
      if let me = self {
        switch me.prop {
        case .empty :
          return .single (false)
        case .multiple :
          return .multiple
        case .single :
          return .single (true)
        }
      }else{
        return .empty
      }
    }
  }

  //····················································································································

}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
