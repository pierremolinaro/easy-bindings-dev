semantics abstractSyntaxTypes :

#----------------------------------------------------------------------------*

import "easyBindingType.gSemantics" ;

#----------------------------------------------------------------------------*
#   @attributeType                                                           *
#----------------------------------------------------------------------------*

abstract class @attributeASTType {
}

#----------------------------------------------------------------------------*

class @boolASTType, @stringASTType, @colorASTType, @integerASTType,
      @uintegerASTType, @doubleASTType, @decimalASTType, @fontASTType,
      @imageASTType, @dataASTType, @dateASTType, @valueASTType,
      @bezierASTType, @menuASTType, @arrayASTType, @anyEnumASTType extends @attributeASTType {
}

#----------------------------------------------------------------------------*

class @namedASTType extends @attributeASTType {
  @lstring mTypeName ;
}

#----------------------------------------------------------------------------*

list @attributeASTTypeList {
  @attributeASTType mType ;
}

#-----------------------------------------------------------------------------*
#-----------------------------------------------------------------------------*

list @attributeList {
  @attributeASTType mType ;
  @lstring mAttributeName ;
  @abstractDefaultValue mDefaultValue ;
}

#----------------------------------------------------------------------------*

enum @deleteRuleEnum {
  nullifyDeleteRule, cascadeDeleteRule, denyDeleteRule
}{
}

#----------------------------------------------------------------------------*

list @relationshipList {
  @bool mIsToMany ;
  @lstring mDestinationEntityName ;
  @lstring mRelationshipName ;
  @lstring mInverseRelationshipName ;
  @bool mInverseRelationIsToMany ;
  @deleteRuleEnum mDeleteRule ;
}

#----------------------------------------------------------------------------*

abstract class @abstractTransientDependency {
}

#----------------------------------------------------------------------------*

class @transientRootSignDependency extends @abstractTransientDependency {
  @location mDeclarationLocation ;
}

#----------------------------------------------------------------------------*

class @transientLocalDependency extends @abstractTransientDependency {
  @lstring mMasterName ;
}

#----------------------------------------------------------------------------*

class @transientRootDependency extends @abstractTransientDependency {
  @lstring mMasterName ;
  @bool mNamesCountOption ;
}

#----------------------------------------------------------------------------*

class @transientControllerDependency extends @abstractTransientDependency {
  @lstring mControllerName ;
  @lstring mMasterName ;
}

#----------------------------------------------------------------------------*

class @transientPreferenceDependency extends @abstractTransientDependency {
  @lstring mPreferencesName ;
  @lstring mMasterName ;
}

#----------------------------------------------------------------------------*

list @dependanceList {
  @abstractTransientDependency mDependency ;
}

#----------------------------------------------------------------------------*

list @transientList {
  @attributeASTType mType ;
  @lstring mTransientName ;
  @dependanceList mDependencyList ;
}

#----------------------------------------------------------------------------*

list @classArrayList {
  @lstring mClassName ;
  @lstring mArrayName ;
}

#----------------------------------------------------------------------------*

list @classList {
  @lstring mClassName ;
  @lstring mSuperClassName ;
  @attributeList mAttributeList ;
  @transientList mTransientList ;
}

#----------------------------------------------------------------------------*

list @entityList {
  @lstring mEntityName ;
  @lstring mSuperEntityName ;
  @attributeList mAttributeList ;
  @transientList mTransientList ;
  @relationshipList mRelationshipList ;
  @lstringlist mSignList ;
}

#----------------------------------------------------------------------------*

list @outletBindingOptionList {
  @lstring mOptionName ;
  @abstractDefaultValue mDefaultValue ;
}

#----------------------------------------------------------------------------*

abstract class @abstractBinding {
}

#----------------------------------------------------------------------------*

class @regularRootBinding, @regularSelfBinding extends @abstractBinding {
  @lstring mBindingName ;
  @lstring mObservableAttributeName ;
  @outletBindingOptionList mOutletBindingOptionList ;
  @bool mNamesCountOption ;
}

#----------------------------------------------------------------------------*

class @regularControllerBinding extends @abstractBinding {
  @lstring mBindingName ;
  @lstring mControllerName ;
  @lstring mControllerAttributeName ;
  @outletBindingOptionList mOutletBindingOptionList ;
  @bool mNamesCountOption ;
}

#----------------------------------------------------------------------------*

class @regularControllerSelectionBinding extends @abstractBinding {
  @lstring mBindingName ;
  @lstring mControllerName ;
  @lstring mControllerAttributeName ;
  @outletBindingOptionList mOutletBindingOptionList ;
}

#----------------------------------------------------------------------------*

class @regularPreferenceBinding extends @abstractBinding {
  @lstring mBindingName ;
  @lstring mPreferenceName ;
  @lstring mPreferenceAttributeName ;
  @outletBindingOptionList mOutletBindingOptionList ;
}

#----------------------------------------------------------------------------*

abstract class @multiValuedBindingBoundModel {
  @lstring mPropertyName ;
}

#----------------------------------------------------------------------------*

class @multiValuedBindingBoundToRoot,
      @multiValuedBindingBoundToSelf extends @multiValuedBindingBoundModel {
}

#----------------------------------------------------------------------------*

class @multiValuedBindingBoundToPref extends @multiValuedBindingBoundModel {
  @lstring mPreferenceName ;
}

#----------------------------------------------------------------------------*

class @multiValuedBindingBoundToController extends @multiValuedBindingBoundModel {
  @lstring mControllerName ;
}

#----------------------------------------------------------------------------*

class @multiValuedBindingBoundToControllerSelection extends @multiValuedBindingBoundModel {
  @lstring mControllerName ;
}

#----------------------------------------------------------------------------*

list @multiValuedBindingList {
  @bool mNegate ;
  @multiValuedBindingBoundModel mBoundModel ;
  @outletBindingOptionList mOutletBindingOptionList ;
}

#----------------------------------------------------------------------------*

class @multiValuedBinding extends @abstractBinding {
  @lstring mBindingName ;
  @multiValuedBindingList mMultiValuedBindingList ;
}

#----------------------------------------------------------------------------*

class @runBinding extends @abstractBinding {
  @lstring mTargetName ;
  @lstring mActionName ;
}

#----------------------------------------------------------------------------*

list @tableValueColumnBinding {
  @lstring mColumnName ;
  @lstring mCellTypeName ;
  @lstring mBoundPropertyName ;
}

#----------------------------------------------------------------------------*

class @tableValueBinding extends @abstractBinding {
  @lstring mControllerName ;
  @tableValueColumnBinding mTableValueColumnBinding ;
}

#----------------------------------------------------------------------------*

list @bindingList {
  @abstractBinding mBinding ;
}

#----------------------------------------------------------------------------*

list @outletDeclarationList {
  @lstring mOutletType ;
  @lstring mOutletName ;
  @bindingList mOutletBindingList ;
}

#----------------------------------------------------------------------------*

list @preferencesDeclarationList {
  @lstring mPreferencesName ;
  @outletDeclarationList mOutletDeclarationList ;
  @attributeList mAttributeList ;
  @transientList mTransientList ;
  @lstringlist mActionDeclarationList ;
  @controllerList mControllerList ;
  @classArrayList mClassArrayList ;
}

#----------------------------------------------------------------------------*

list @nibClassDeclarationList {
  @lstring mClassName ;
  @outletDeclarationList mOutletDeclarationList ;
  @attributeList mAttributeList ;
  @transientList mTransientList ;
  @lstringlist mActionDeclarationList ;
  @controllerList mControllerList ;
  @classArrayList mClassArrayList ;
}

#----------------------------------------------------------------------------*

list @controllerList {
  @controllerKind mControllerKind ;
  @lstring mControllerClassName ;
  @lstring mControllerName ;
  @lbool mIsRootObject ; # false -> is self object
  @lstring mControlledObjectName ;
  @outletBindingOptionList mControlledObjectBindingOptionList ;
  @bindingList mControllerBindingList ;
}

#----------------------------------------------------------------------------*

list @documentDeclarationList {
  @lstring mDocumentName ;
  @lstring mRootEntityName ;
  @outletDeclarationList mOutletDeclarationList ;
  @controllerList mControllerList ;
  @lstringlist mActionDeclarationList ;
  @transientList mTransientList ;
  @attributeList mAttributeList ;
}

#----------------------------------------------------------------------------*

enum @formatterEnum {
  noFormatter, numberFormatter, dateFormatter
}{
}

#----------------------------------------------------------------------------*

list @attributeASTTypeAndFormatterList {
  @attributeASTType mType ;
  @formatterEnum mRequiredFormatter ;
}

#----------------------------------------------------------------------------*

list @easyBindingTypeAndFormatterList {
  @easyBindingType mType ;
  @formatterEnum mRequiredFormatter ;
}

#----------------------------------------------------------------------------*

list @easyBindingTypeList {
  @easyBindingType mType ;
}

#----------------------------------------------------------------------------*

list @outletClassBindingList {
  @lstring mBindingName ;
  @attributeASTTypeAndFormatterList mAcceptableTypeFormatterList ;
  @bindingOptionList mBindingOptionList ;
}

#----------------------------------------------------------------------------*

list @bindingOptionList {
  @lstring mBindingOptionName ;
  @attributeASTTypeList mAcceptableTypeList ;
}

#----------------------------------------------------------------------------*

enum @generationKind {
  fullGeneration, generateImport, noGeneration
}{
}

#----------------------------------------------------------------------------*

list @cursorList {
  @lstring mCursorName ;
  @ldouble mHotSpotX ;
  @ldouble mHotSpotY ;
}

#----------------------------------------------------------------------------*

list @outletClassList {
  @lstring mOutletClassName ;
  @lstring mSuperClassName ;
  @lstringlist mAdoptedProtocolList ;
  @generationKind mGeneration ;
  @outletClassBindingList mOutletClassBindingList ;
  @bool mHasTableValueBinding ;
  @lstringlist mOptionList ;
}

#----------------------------------------------------------------------------*

list @controllerObservablePropertyList {
  @attributeASTType mType ;
  @lstring mPropertyName ;
}

#----------------------------------------------------------------------------*

list @protocolList {
  @bool mIsPredefined ; # Generate import otherwise
  @lstring mProtocolName ;
}

#----------------------------------------------------------------------------*

enum @controllerKind {
  simpleController,
  objectController, # NSObjectController
  arrayController,  # NSArrayController
  entityController, # PMEntityController
  entityArrayController # PMEntityArrayController
}{

}

#----------------------------------------------------------------------------*

list @controllerClassList {
  @controllerKind mControllerKind ;
  @lstring mControllerClassName ;
  @bindingOptionList mControlledObjectBindingOptionList ;
  @generationKind mGenerationKind ;
  @outletClassBindingList mBindingList ;
  @lstringlist mActionDeclarationList ;
  @controllerObservablePropertyList mControllerObservablePropertyList ;
}

#----------------------------------------------------------------------------*

list @enumList {
  @lstring mEnumTypeName ;
  @lstringlist mEnumConstantNameList ;
}

#----------------------------------------------------------------------------*

abstract class @abstractDefaultValue {
}

#----------------------------------------------------------------------------*

class @boolAsDefaultValue extends @abstractDefaultValue {
  @lbool mValue ;
}

#----------------------------------------------------------------------------*

class @doubleAsDefaultValue extends @abstractDefaultValue {
  @ldouble mValue ;
}

#----------------------------------------------------------------------------*

class @integerAsDefaultValue extends @abstractDefaultValue {
  @luint mValue ;
}

#----------------------------------------------------------------------------*

class @stringAsDefaultValue extends @abstractDefaultValue {
  @lstring mValue ;
}

#----------------------------------------------------------------------------*

class @identifierAsDefaultValue extends @abstractDefaultValue {
  @lstring mValue ;
}

#----------------------------------------------------------------------------*

list @defaultValueList {
  @abstractDefaultValue mDefaultValue ;
}

#----------------------------------------------------------------------------*

class @listAsDefaultValue extends @abstractDefaultValue {
  @location mStartLocation ;
  @defaultValueList mDefaultValueList ;
}

#----------------------------------------------------------------------------*

list @structFieldASTList {
  @attributeASTType mFieldType ;
  @lstring mFieldName ;
}

#----------------------------------------------------------------------------*

list @structTypeList {
  @lstring mStructTypeName ;
  @structFieldASTList mFieldList ;
}

#----------------------------------------------------------------------------*

end semantics ;
