//-----------------------------------------------------------------------------*
//                                                                             *
//                        File 'entityGeneration.cpp'                          *
//                         Generated by version 2.7.0                          *
//                       august 8th, 2014, at 19h1'34"                         *
//                                                                             *
//-----------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

#include "galgas2/C_Compiler.h"
#include "galgas2/C_galgas_io.h"
#include "galgas2/C_galgas_CLI_Options.h"
#include "utilities/C_PrologueEpilogue.h"

//-----------------------------------------------------------------------------*

#include "easyBindings_options.h"
#include "entityGeneration.h"


//-----------------------------------------------------------------------------*
//                                                                             *
//                   Filewrapper 'entityGenerationTemplate'                    *
//                                                                             *
//-----------------------------------------------------------------------------*

//--- All files of '' directory

static const cRegularFileWrapper * gWrapperAllFiles_entityGenerationTemplate_0 [1] = {
  NULL
} ;

//--- All sub-directories of '' directory

static const cDirectoryWrapper * gWrapperAllDirectories_entityGenerationTemplate_0 [1] = {
  NULL
} ;

//--- Directory ''

const cDirectoryWrapper gWrapperDirectory_0_entityGenerationTemplate (
  "",
  0,
  gWrapperAllFiles_entityGenerationTemplate_0,
  0,
  gWrapperAllDirectories_entityGenerationTemplate_0
) ;


//-----------------------------------------------------------------------------*
//                                                                             *
// Filewrapper template 'entityGenerationTemplate entityImplementationInSwift' *
//                                                                             *
//-----------------------------------------------------------------------------*

GALGAS_string filewrapperTemplate_entityGenerationTemplate_entityImplementationInSwift (C_Compiler * inCompiler,
                                                                                        const GALGAS_string & in_ENTITY_5F_NAME,
                                                                                        const GALGAS_attributeListForImplementation & in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION,
                                                                                        const GALGAS_transientListForImplementation & in_TRANSIENT_5F_LIST_5F_FOR_5F_IMPLEMENTATION,
                                                                                        const GALGAS_attributeListForImplementation & /* in_ALL_5F_PROPERTIES_5F_FOR_5F_INIT_5F_METHOD_5F_HEADER */,
                                                                                        const GALGAS_attributeListForImplementation & /* in_INHERITED_5F_PROPERTIES_5F_FOR_5F_SUPER_5F_INIT_5F_CALL */,
                                                                                        const GALGAS_stringset & /* in_INCLUSION_5F_SET */,
                                                                                        const GALGAS__32_stringlist & /* in_TO_5F_MANY_5F_RELATIONSHIPS */,
                                                                                        const GALGAS_stringset & /* in_PROPERTY_5F_AND_5F_RELATIONSHIP_5F_SET */,
                                                                                        const GALGAS__32_stringlist & /* in_TO_5F_ONE_5F_RELATIONSHIPS */,
                                                                                        const GALGAS_relationshipList & in_CURRENT_5F_RELATIONSHIP_5F_LIST,
                                                                                        const GALGAS_EXentityRelationshipMap & in_ENTITY_5F_CURRENT_5F_RELATIONSHIP_5F_MAP,
                                                                                        const GALGAS_signListForGeneration & /* in_SIGN_5F_LIST */,
                                                                                        const GALGAS_stringset & in_SIGN_5F_SET
                                                                                        COMMA_UNUSED_LOCATION_ARGS) {
  C_String result ;
  result << "import Cocoa\n"
    "\n"
    "//---------------------------------------------------------------------------------------------------------------------*\n"
    "\n"
    "@objc(" ;
  result << in_ENTITY_5F_NAME.stringValue () ;
  result << ") class " ;
  result << in_ENTITY_5F_NAME.stringValue () ;
  result << " : PMManagedObject {\n"
    "\n" ;
  GALGAS_uint index_244_ (0) ;
  if (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION.isValid ()) {
    cEnumerator_attributeListForImplementation enumerator_244 (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION, kEnumeration_up) ;
    while (enumerator_244.hasCurrentObject ()) {
      result << categoryReader_generateAttributeDeclarationInSwift (enumerator_244.current_mType (HERE), GALGAS_string ("entity"), in_ENTITY_5F_NAME, enumerator_244.current_mAttributeName (HERE), enumerator_244.current_mDirectSwiftDefaultValue (HERE), GALGAS_bool (true), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 8)).stringValue () ;
      index_244_.increment () ;
      enumerator_244.gotoNextObject () ;
    }
  }
  GALGAS_uint index_431_ (0) ;
  if (in_ENTITY_5F_CURRENT_5F_RELATIONSHIP_5F_MAP.isValid ()) {
    cEnumerator_EXentityRelationshipMap enumerator_431 (in_ENTITY_5F_CURRENT_5F_RELATIONSHIP_5F_MAP, kEnumeration_up) ;
    while (enumerator_431.hasCurrentObject ()) {
      const enumGalgasBool test_0 = enumerator_431.current_mIsToMany (HERE).boolEnum () ;
      if (kBoolTrue == test_0) {
        result << "  //-------------------------------------------------------------------------------------------------------------------*\n"
          "  //    " ;
        result << GALGAS_string ("To many relationship: ").add_operation (enumerator_431.current_lkey (HERE).reader_string (SOURCE_FILE ("entity.swift.gTemplate", 14)), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 14)).reader_stringByRightPadding (GALGAS_uint ((uint32_t) 111U), GALGAS_char (TO_UNICODE (32)) COMMA_SOURCE_FILE ("entity.swift.gTemplate", 14)).stringValue () ;
        result << "*\n"
          "  //-------------------------------------------------------------------------------------------------------------------*\n"
          "\n"
          "  var " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "_observers = NSMutableSet ()\n"
          "  var " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "__explorer : NSPopUpButton\?\n"
          "  var " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << " : NSMutableArray = NSMutableArray () { // Set of " ;
        result << enumerator_431.current_mRelationshipType (HERE).reader_key (inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 19)).stringValue () ;
        result << " entities\n"
          "    didSet {\n"
          "      if (oldValue !== " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << ") {\n"
          "      //--- Register old value in undo manager\n"
          "        undoManager ().registerUndoWithTarget (self, selector:\"set" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 23)).stringValue () ;
        result << "\", object:oldValue)\n"
          "      //--- Update explorer\n"
          "        if " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "__explorer != nil {\n"
          "          updateManagedObjectToManyRelationshipDisplayForKey (\"" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "\", popUpButton:" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "__explorer!)\n"
          "        }\n"
          "      //--- Removed object set\n"
          "        var removedObjectSet = NSMutableSet ()\n"
          "        removedObjectSet.addObjectsFromArray (oldValue)\n"
          "        removedObjectSet.minusSet (NSSet (array:" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "))\n"
          "        for object : AnyObject in removedObjectSet {\n"
          "          let managedObject = object as " ;
        result << enumerator_431.current_mRelationshipType (HERE).reader_key (inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 33)).stringValue () ;
        result << "\n"
          "          managedObject." ;
        result << enumerator_431.current_mOppositeRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " = nil ;\n" ;
        const enumGalgasBool test_1 = in_SIGN_5F_SET.reader_hasKey (enumerator_431.current_lkey (HERE).mAttribute_string COMMA_SOURCE_FILE ("entity.swift.gTemplate", 35)).boolEnum () ;
        if (kBoolTrue == test_1) {
          result << "      managedObject.removeSignatureObserver (self)\n" ;
        }else if (kBoolFalse == test_1) {
        }
        result << "        }\n"
          "      //--- Added object set\n"
          "        var addedObjectSet = NSMutableSet ()\n"
          "        addedObjectSet.addObjectsFromArray (" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << ")\n"
          "        addedObjectSet.minusSet (NSSet (array:oldValue))\n"
          "        for object : AnyObject in addedObjectSet {\n"
          "          let managedObject = object as " ;
        result << enumerator_431.current_mRelationshipType (HERE).reader_key (inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 44)).stringValue () ;
        result << "\n"
          "          managedObject." ;
        result << enumerator_431.current_mOppositeRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " = self\n" ;
        const enumGalgasBool test_2 = in_SIGN_5F_SET.reader_hasKey (enumerator_431.current_lkey (HERE).mAttribute_string COMMA_SOURCE_FILE ("entity.swift.gTemplate", 46)).boolEnum () ;
        if (kBoolTrue == test_2) {
          result << "      object.addSignatureObserver (self)\n" ;
        }else if (kBoolFalse == test_2) {
        }
        result << "        }\n"
          "      //--- Notify observers object count did change\n"
          "        for anyObject in " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "_observers {\n"
          "          let object = anyObject as PMTriggerProtocol\n"
          "          enterTriggerWithObject (object)\n"
          "        }\n" ;
        const enumGalgasBool test_3 = in_SIGN_5F_SET.reader_hasKey (enumerator_431.current_lkey (HERE).mAttribute_string COMMA_SOURCE_FILE ("entity.swift.gTemplate", 55)).boolEnum () ;
        if (kBoolTrue == test_3) {
          result << "    //--- Trigger signature computing\n"
            "      triggerSignatureComputing ()\n" ;
        }else if (kBoolFalse == test_3) {
        }
        result << "      }\n"
          "    }\n"
          "  }\n"
          "\n"
          "  func insertObject (inObject : " ;
        result << enumerator_431.current_mRelationshipType (HERE).reader_key (inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 63)).stringValue () ;
        result << ",\n"
          "                     in" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 64)).stringValue () ;
        result << "AtIndex: Int) {\n"
          "    let idx : Int = " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << ".indexOfObject (inObject)\n"
          "    if idx == NSNotFound {\n"
          "      " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << ".insertObject (inObject, atIndex:inMNamesAtIndex)\n"
          "        undoManager ().registerUndoWithTarget (self,\n"
          "        selector:\"removeObjectFrom" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 69)).stringValue () ;
        result << ":\",\n"
          "        object:inObject\n"
          "      )\n"
          "      inObject." ;
        result << enumerator_431.current_mOppositeRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " = self\n"
          "    //--- Update explorer\n"
          "      if " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "__explorer != nil {\n"
          "        updateManagedObjectToManyRelationshipDisplayForKey (\"" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "\", popUpButton:" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "__explorer!)\n"
          "      }\n"
          "    }else if idx != inMNamesAtIndex {\n"
          "    }\n"
          "  //--- Notify observers object count did change\n"
          "    for anyObject in " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "_observers {\n"
          "      let object = anyObject as PMTriggerProtocol\n"
          "      enterTriggerWithObject (object)\n"
          "    }\n"
          "  }\n"
          "\n"
          "  func removeObjectFrom" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 86)).stringValue () ;
        result << "AtIndex (inIndex : Int) {\n"
          "    let removedObject = " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << ".objectAtIndex (inIndex) as " ;
        result << enumerator_431.current_mRelationshipType (HERE).reader_key (inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 87)).stringValue () ;
        result << "\n"
          "  //--- Perform removing\n"
          "    " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << ".removeObjectAtIndex (inIndex)\n"
          "  //--- Register all object in undo manager\n"
          "    undoManager ().prepareWithInvocationTarget (self).insertObject (removedObject, in" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 91)).stringValue () ;
        result << "AtIndex:inIndex)\n"
          "  //--- Update explorer\n"
          "    if " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "__explorer != nil {\n"
          "      updateManagedObjectToManyRelationshipDisplayForKey (\"" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "\", popUpButton:" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "__explorer!)\n"
          "    }\n"
          "  //--- Reset inverse relationship\n"
          "    removedObject." ;
        result << enumerator_431.current_mOppositeRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " = nil\n"
          "  //--- Notify observers object count did change\n"
          "    for anyObject in " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "_observers {\n"
          "      let object = anyObject as PMTriggerProtocol\n"
          "      enterTriggerWithObject (object)\n"
          "    }\n"
          "  }\n"
          "\n"
          "  func appendTo" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 105)).stringValue () ;
        result << " (inObject : " ;
        result << enumerator_431.current_mRelationshipType (HERE).reader_key (inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 105)).stringValue () ;
        result << ") {\n"
          "    if !" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << ".containsObject (inObject) {\n"
          "      insertObject (inObject, in" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 107)).stringValue () ;
        result << "AtIndex:self." ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << ".count)\n"
          "    }\n"
          "  }\n"
          "\n"
          "  func removeObjectFrom" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 111)).stringValue () ;
        result << " (inObject : " ;
        result << enumerator_431.current_mRelationshipType (HERE).reader_key (inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 111)).stringValue () ;
        result << ") {\n"
          "    let idx = " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << ".indexOfObject (inObject)\n"
          "    if NSNotFound != idx {\n"
          "      removeObjectFrom" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 114)).stringValue () ;
        result << "AtIndex (idx)\n"
          "    }\n"
          "  }\n"
          "   \n"
          "  func addObserverOf_" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << " (inObserver : PMTriggerProtocol) {\n"
          "    " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "_observers.addObject (inObserver)\n"
          "    enterTriggerWithObject (inObserver)\n"
          "  }\n"
          "\n"
          "  func removeObserverOf_" ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << " (inObserver : PMTriggerProtocol) {\n"
          "    " ;
        result << enumerator_431.current_lkey (HERE).mAttribute_string.stringValue () ;
        result << "_observers.removeObject (inObserver)\n"
          "    enterTriggerWithObject (inObserver)\n"
          "  }\n" ;
      }else if (kBoolFalse == test_0) {
      }
      index_431_.increment () ;
      enumerator_431.gotoNextObject () ;
    }
  }
  GALGAS_uint index_5663_ (0) ;
  if (in_CURRENT_5F_RELATIONSHIP_5F_LIST.isValid ()) {
    cEnumerator_relationshipList enumerator_5663 (in_CURRENT_5F_RELATIONSHIP_5F_LIST, kEnumeration_up) ;
    while (enumerator_5663.hasCurrentObject ()) {
      const enumGalgasBool test_4 = enumerator_5663.current_mIsToMany (HERE).operator_not (SOURCE_FILE ("entity.swift.gTemplate", 131)).boolEnum () ;
      if (kBoolTrue == test_4) {
        result << "  //-------------------------------------------------------------------------------------------------------------------*\n"
          "  //    " ;
        result << GALGAS_string ("To one relationship: ").add_operation (enumerator_5663.current_mRelationshipName (HERE).reader_string (SOURCE_FILE ("entity.swift.gTemplate", 133)), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 133)).reader_stringByRightPadding (GALGAS_uint ((uint32_t) 111U), GALGAS_char (TO_UNICODE (32)) COMMA_SOURCE_FILE ("entity.swift.gTemplate", 133)).stringValue () ;
        result << "*\n"
          "  //-------------------------------------------------------------------------------------------------------------------*\n"
          "\n"
          "  var " ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "_observers = NSMutableSet ()\n"
          "  var " ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "__explorer : NSButton\?\n"
          "  weak var " ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " : " ;
        result << enumerator_5663.current_mDestinationEntityName (HERE).mAttribute_string.stringValue () ;
        result << "\? = nil {\n"
          "    didSet {\n"
          " //     if oldValue != " ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " {\n"
          "      //--- Register old value in undo manager\n"
          "        undoManager ().registerUndoWithTarget (self, selector:\"set" ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 142)).stringValue () ;
        result << ":\", object:oldValue)\n"
          "      //--- Update explorer\n"
          "        if " ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "__explorer != nil {\n"
          "          updateManagedObjectToOneRelationshipDisplayForKey (\"" ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "\", button : " ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "__explorer!)\n"
          "        }\n" ;
        const enumGalgasBool test_5 = in_SIGN_5F_SET.reader_hasKey (enumerator_5663.current_mRelationshipName (HERE).mAttribute_string COMMA_SOURCE_FILE ("entity.swift.gTemplate", 147)).boolEnum () ;
        if (kBoolTrue == test_5) {
          result << "  //--- Remove signature observer from old object\n"
            "       " ;
          result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
          result << ".removeSignatureObserver (self)\n" ;
        }else if (kBoolFalse == test_5) {
        }
        result << "      //--- Set opposite relation ship\n" ;
        const enumGalgasBool test_6 = enumerator_5663.current_mInverseRelationIsToMany (HERE).boolEnum () ;
        if (kBoolTrue == test_6) {
          result << "        oldValue\?.removeObjectFrom" ;
          result << enumerator_5663.current_mInverseRelationshipName (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 153)).stringValue () ;
          result << " (self)\n"
            "        " ;
          result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
          result << "\?.appendTo" ;
          result << enumerator_5663.current_mInverseRelationshipName (HERE).mAttribute_string.reader_stringByCapitalizingFirstCharacter (SOURCE_FILE ("entity.swift.gTemplate", 154)).stringValue () ;
          result << " (self)\n" ;
        }else if (kBoolFalse == test_6) {
          result << "        oldValue\?." ;
          result << enumerator_5663.current_mInverseRelationshipName (HERE).mAttribute_string.stringValue () ;
          result << " = nil\n"
            "        " ;
          result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
          result << "\?." ;
          result << enumerator_5663.current_mInverseRelationshipName (HERE).mAttribute_string.stringValue () ;
          result << " = self\n" ;
        }
        const enumGalgasBool test_7 = in_SIGN_5F_SET.reader_hasKey (enumerator_5663.current_mRelationshipName (HERE).mAttribute_string COMMA_SOURCE_FILE ("entity.swift.gTemplate", 159)).boolEnum () ;
        if (kBoolTrue == test_7) {
          result << "   //--- Add signature observer to new object\n"
            "      " ;
          result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
          result << ".addSignatureObserver (self)\n"
            "    //--- Trigger signature computing\n"
            "      triggerSignatureComputing ()\n" ;
        }else if (kBoolFalse == test_7) {
        }
        result << "      }\n"
          "//    }\n"
          "  }\n"
          "   \n"
          "  func addObserverOf_" ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " (inObserver : AnyObject) {\n"
          "    " ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "_observers.addObject (inObserver)\n"
          "    NSApp.sendAction (\"" ;
        result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 171)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 171)).add_operation (enumerator_5663.current_mRelationshipName (HERE).reader_string (SOURCE_FILE ("entity.swift.gTemplate", 171)), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 171)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 171)).stringValue () ;
        result << "_didChange\", to:inObserver, from:self)\n"
          "  }\n"
          "\n"
          "  func removeObserverOf_" ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " (inObserver : AnyObject) {\n"
          "    " ;
        result << enumerator_5663.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "_observers.removeObject (inObserver)\n"
          "    NSApp.sendAction (\"" ;
        result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 176)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 176)).add_operation (enumerator_5663.current_mRelationshipName (HERE).reader_string (SOURCE_FILE ("entity.swift.gTemplate", 176)), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 176)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 176)).stringValue () ;
        result << "_didChange\", to:inObserver, from:self)\n"
          "  }\n" ;
      }else if (kBoolFalse == test_4) {
      }
      index_5663_.increment () ;
      enumerator_5663.gotoNextObject () ;
    }
  }
  result << "\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "  //    init                                                                                                           *\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "\n"
    "  init (entityManager : PMObjectManager) {\n"
    "    super.init (entityManager:entityManager)\n"
    "  //--- Register trigger objects\n" ;
  result << function_generateAddSwiftObserverForTransients (GALGAS_string ("entity"), in_ENTITY_5F_NAME, in_TRANSIENT_5F_LIST_5F_FOR_5F_IMPLEMENTATION, GALGAS_string ("    "), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 190)).stringValue () ;
  result << "  }\n"
    "\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "  //    deinit                                                                                                         *\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "\n"
    "  deinit {\n"
    "  //--- remove trigger objects\n" ;
  result << function_generateRemoveSwiftObserverForTransients (GALGAS_string ("entity"), in_ENTITY_5F_NAME, in_TRANSIENT_5F_LIST_5F_FOR_5F_IMPLEMENTATION, GALGAS_string ("    "), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 200)).stringValue () ;
  result << "  }\n"
    "\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "  //    populateExplorerWindow                                                                                         *\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "\n"
    "  override func populateExplorerWindowWithRect (inout ioRect : NSRect, view : NSView) {\n" ;
  GALGAS_uint index_9861_ (0) ;
  if (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION.isValid ()) {
    cEnumerator_attributeListForImplementation enumerator_9861 (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION, kEnumeration_up) ;
    while (enumerator_9861.hasCurrentObject ()) {
      result << "    " ;
      result << enumerator_9861.current_mAttributeName (HERE).stringValue () ;
      result << "__explorer = createEntryForAttributeNamed (\"" ;
      result << enumerator_9861.current_mAttributeName (HERE).stringValue () ;
      result << "\", ioRect:&ioRect, view:view)\n"
        "    if " ;
      result << enumerator_9861.current_mAttributeName (HERE).stringValue () ;
      result << "__explorer {\n"
        "      " ;
      result << enumerator_9861.current_mAttributeName (HERE).stringValue () ;
      result << "__explorer!.stringValue = " ;
      result << categoryReader_valueAccessorForExplorerWindow (enumerator_9861.current_mType (HERE), enumerator_9861.current_mAttributeName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 211)).stringValue () ;
      result << "\n"
        "    }\n" ;
      index_9861_.increment () ;
      enumerator_9861.gotoNextObject () ;
    }
  }
  GALGAS_uint index_10180_ (0) ;
  if (in_CURRENT_5F_RELATIONSHIP_5F_LIST.isValid ()) {
    cEnumerator_relationshipList enumerator_10180 (in_CURRENT_5F_RELATIONSHIP_5F_LIST, kEnumeration_up) ;
    while (enumerator_10180.hasCurrentObject ()) {
      const enumGalgasBool test_8 = enumerator_10180.current_mIsToMany (HERE).boolEnum () ;
      if (kBoolTrue == test_8) {
        result << "   " ;
        result << enumerator_10180.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "__explorer = createEntryForToManyRelationshipNamed (\"" ;
        result << enumerator_10180.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "\", ioRect: &ioRect, view: view)\n"
          "   updateManagedObjectToManyRelationshipDisplayForKey (\"" ;
        result << enumerator_10180.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "\", popUpButton:" ;
        result << enumerator_10180.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "__explorer!)\n" ;
      }else if (kBoolFalse == test_8) {
        result << "   " ;
        result << enumerator_10180.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "__explorer = createEntryForToOneRelationshipNamed (\"" ;
        result << enumerator_10180.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "\", ioRect: &ioRect, view: view)\n"
          "   updateManagedObjectToOneRelationshipDisplayForKey (\"" ;
        result << enumerator_10180.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "\",button:" ;
        result << enumerator_10180.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "__explorer!)\n" ;
      }
      index_10180_.increment () ;
      enumerator_10180.gotoNextObject () ;
    }
  }
  result << "  }\n"
    "\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "  //    clearObjectExplorer                                                                                            *\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "\n"
    "  override func clearObjectExplorer () {\n" ;
  GALGAS_uint index_11241_ (0) ;
  if (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION.isValid ()) {
    cEnumerator_attributeListForImplementation enumerator_11241 (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION, kEnumeration_up) ;
    while (enumerator_11241.hasCurrentObject ()) {
      result << "    " ;
      result << enumerator_11241.current_mAttributeName (HERE).stringValue () ;
      result << "__explorer = nil\n" ;
      index_11241_.increment () ;
      enumerator_11241.gotoNextObject () ;
    }
  }
  GALGAS_uint index_11324_ (0) ;
  if (in_CURRENT_5F_RELATIONSHIP_5F_LIST.isValid ()) {
    cEnumerator_relationshipList enumerator_11324 (in_CURRENT_5F_RELATIONSHIP_5F_LIST, kEnumeration_up) ;
    while (enumerator_11324.hasCurrentObject ()) {
      result << "    " ;
      result << enumerator_11324.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
      result << "__explorer = nil\n" ;
      index_11324_.increment () ;
      enumerator_11324.gotoNextObject () ;
    }
  }
  result << "    super.clearObjectExplorer ()\n"
    "  }\n"
    "\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "  //    saveIntoDictionary                                                                                             *\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "\n"
    "  override func saveIntoDictionary (ioDictionary : NSMutableDictionary) {\n"
    "    super.saveIntoDictionary (ioDictionary)\n" ;
  GALGAS_uint index_11947_ (0) ;
  if (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION.isValid ()) {
    cEnumerator_attributeListForImplementation enumerator_11947 (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION, kEnumeration_up) ;
    while (enumerator_11947.hasCurrentObject ()) {
      result << "    ioDictionary.setValue (" ;
      result << categoryReader_dictionarySaverTransformerName (enumerator_11947.current_mType (HERE), enumerator_11947.current_mAttributeName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 244)).stringValue () ;
      result << ", forKey: \"" ;
      result << enumerator_11947.current_mAttributeName (HERE).stringValue () ;
      result << "\")\n" ;
      index_11947_.increment () ;
      enumerator_11947.gotoNextObject () ;
    }
  }
  GALGAS_uint index_12107_ (0) ;
  if (in_CURRENT_5F_RELATIONSHIP_5F_LIST.isValid ()) {
    cEnumerator_relationshipList enumerator_12107 (in_CURRENT_5F_RELATIONSHIP_5F_LIST, kEnumeration_up) ;
    while (enumerator_12107.hasCurrentObject ()) {
      const enumGalgasBool test_9 = enumerator_12107.current_mIsToMany (HERE).boolEnum () ;
      if (kBoolTrue == test_9) {
        result << "    storeEntityArrayInDictionary (" ;
        result << enumerator_12107.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << ", inRelationshipName:\"" ;
        result << enumerator_12107.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "\", ioDictionary:ioDictionary) ;\n" ;
      }else if (kBoolFalse == test_9) {
        result << "    storeEntityInDictionary (" ;
        result << enumerator_12107.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << ", inRelationshipName:\"" ;
        result << enumerator_12107.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "\", ioDictionary:ioDictionary) ;\n" ;
      }
      index_12107_.increment () ;
      enumerator_12107.gotoNextObject () ;
    }
  }
  result << "  }\n"
    "\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "  //    setUpWithDictionary                                                                                            *\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "\n"
    "  override func setUpWithDictionary (inDictionary : NSDictionary,\n"
    "                                     managedObjectArray : NSArray) {\n"
    "    super.setUpWithDictionary (inDictionary, managedObjectArray:managedObjectArray)\n" ;
  GALGAS_uint index_13070_ (0) ;
  if (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION.isValid ()) {
    cEnumerator_attributeListForImplementation enumerator_13070 (in_ATTRIBUTE_5F_LIST_5F_FOR_5F_IMPLEMENTATION, kEnumeration_up) ;
    while (enumerator_13070.hasCurrentObject ()) {
      result << "    " ;
      result << enumerator_13070.current_mAttributeName (HERE).stringValue () ;
      result << " = inDictionary.read" ;
      result << categoryReader_swiftTypeName (enumerator_13070.current_mType (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 263)).stringValue () ;
      result << " (\"" ;
      result << enumerator_13070.current_mAttributeName (HERE).stringValue () ;
      result << "\")\n" ;
      index_13070_.increment () ;
      enumerator_13070.gotoNextObject () ;
    }
  }
  GALGAS_uint index_13203_ (0) ;
  if (in_CURRENT_5F_RELATIONSHIP_5F_LIST.isValid ()) {
    cEnumerator_relationshipList enumerator_13203 (in_CURRENT_5F_RELATIONSHIP_5F_LIST, kEnumeration_up) ;
    while (enumerator_13203.hasCurrentObject ()) {
      const enumGalgasBool test_10 = enumerator_13203.current_mIsToMany (HERE).boolEnum () ;
      if (kBoolTrue == test_10) {
        result << "    " ;
        result << enumerator_13203.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " = readEntityArrayFromDictionary (\"" ;
        result << enumerator_13203.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "\", inDictionary:inDictionary, managedObjectArray:managedObjectArray)\n" ;
      }else if (kBoolFalse == test_10) {
        const enumGalgasBool test_11 = enumerator_13203.current_mInverseRelationIsToMany (HERE).operator_not (SOURCE_FILE ("entity.swift.gTemplate", 268)).boolEnum () ;
        if (kBoolTrue == test_11) {
          result << "    " ;
          result << enumerator_13203.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
          result << " = readEntityFromDictionary (\"" ;
          result << enumerator_13203.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
          result << "\", inDictionary:inDictionary, managedObjectArray:managedObjectArray) as\? " ;
          result << enumerator_13203.current_mDestinationEntityName (HERE).mAttribute_string.stringValue () ;
          result << "\n" ;
        }else if (kBoolFalse == test_11) {
        }
      }
      index_13203_.increment () ;
      enumerator_13203.gotoNextObject () ;
    }
  }
  result << "  }\n"
    "\n" ;
  GALGAS_uint index_13697_ (0) ;
  if (in_TRANSIENT_5F_LIST_5F_FOR_5F_IMPLEMENTATION.isValid ()) {
    cEnumerator_transientListForImplementation enumerator_13697 (in_TRANSIENT_5F_LIST_5F_FOR_5F_IMPLEMENTATION, kEnumeration_up) ;
    while (enumerator_13697.hasCurrentObject ()) {
      result << "  //-------------------------------------------------------------------------------------------------------------------*\n"
        "  //    " ;
      result << GALGAS_string ("Transient: ").add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 277)).reader_stringByRightPadding (GALGAS_uint ((uint32_t) 111U), GALGAS_char (TO_UNICODE (32)) COMMA_SOURCE_FILE ("entity.swift.gTemplate", 277)).stringValue () ;
      result << "*\n"
        "  //-------------------------------------------------------------------------------------------------------------------*\n"
        "\n"
        "  var " ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << "_observers = NSMutableSet ()\n"
        "  var " ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << "__cache : " ;
      result << categoryReader_swiftTypeName (enumerator_13697.current_mTransientType (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 280)).stringValue () ;
      result << "\?\n"
        "  var " ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << " : " ;
      result << categoryReader_swiftTypeName (enumerator_13697.current_mTransientType (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 281)).stringValue () ;
      result << " {\n" ;
      result << function_generateSwiftTransientCacheRoutine (in_ENTITY_5F_NAME, enumerator_13697.current_mTransientType (HERE), enumerator_13697.current_mTransientName (HERE), enumerator_13697.current_mDependencyList (HERE), enumerator_13697.current_mRootSignDependencyList (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 282)).stringValue () ;
      result << "  }\n"
        "\n"
        "  func " ;
      result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 285)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 285)).add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 285)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 285)).stringValue () ;
      result << "_didChange () {\n"
        "    self.willChangeValueForKey (\"" ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << "\")\n"
        "    self.didChangeValueForKey  (\"" ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << "\")\n"
        "    for anyObject in " ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << "_observers {\n"
        "      let object = anyObject as PMTriggerProtocol\n"
        "      enterTriggerWithObject (object)\n"
        "    }\n"
        "  }\n"
        "\n"
        "   func addObserverOf_" ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << " (inObserver : PMTriggerProtocol) {\n"
        "    " ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << "_observers.addObject (inObserver)\n"
        "    enterTriggerWithObject (inObserver)\n"
        "  }\n"
        " \n"
        "  func removeObserverOf_" ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << " (inObserver : PMTriggerProtocol) {\n"
        "    " ;
      result << enumerator_13697.current_mTransientName (HERE).stringValue () ;
      result << "_observers.removeObject (inObserver)\n"
        "    enterTriggerWithObject (inObserver)\n"
        "  }\n"
        "\n"
        "  var triggerObjectFor_" ;
      result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 304)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 304)).add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 304)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 304)).stringValue () ;
      result << "__cache : PMTrigger_" ;
      result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 304)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 304)).add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 304)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 304)).stringValue () ;
      result << "\? = nil\n"
        "  var triggerObjectFor_" ;
      result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 305)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 305)).add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 305)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 305)).stringValue () ;
      result << " : PMTrigger_" ;
      result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 305)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 305)).add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 305)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 305)).stringValue () ;
      result << " {\n"
        "    if !triggerObjectFor_" ;
      result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 306)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 306)).add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 306)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 306)).stringValue () ;
      result << "__cache {\n"
        "      triggerObjectFor_" ;
      result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 307)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 307)).add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 307)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 307)).stringValue () ;
      result << "__cache = PMTrigger_" ;
      result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 307)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 307)).add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 307)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 307)).stringValue () ;
      result << " (object:self)\n"
        "    }\n"
        "    return triggerObjectFor_" ;
      result << GALGAS_string ("entity.").add_operation (in_ENTITY_5F_NAME, inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 309)).add_operation (GALGAS_string ("."), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 309)).add_operation (enumerator_13697.current_mTransientName (HERE), inCompiler COMMA_SOURCE_FILE ("entity.swift.gTemplate", 309)).reader_identifierRepresentation (SOURCE_FILE ("entity.swift.gTemplate", 309)).stringValue () ;
      result << "__cache!\n"
        "  }\n"
        " \n" ;
      index_13697_.increment () ;
      enumerator_13697.gotoNextObject () ;
    }
  }
  result << "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "  //   accessibleObjects                                                                                               *\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "\n"
    "  override func accessibleObjects (inout objects : NSMutableArray) {\n"
    "    super.accessibleObjects (&objects)\n" ;
  GALGAS_uint index_16414_ (0) ;
  if (in_CURRENT_5F_RELATIONSHIP_5F_LIST.isValid ()) {
    cEnumerator_relationshipList enumerator_16414 (in_CURRENT_5F_RELATIONSHIP_5F_LIST, kEnumeration_up) ;
    while (enumerator_16414.hasCurrentObject ()) {
      const enumGalgasBool test_12 = enumerator_16414.current_mIsToMany (HERE).boolEnum () ;
      if (kBoolTrue == test_12) {
        result << "    for object : AnyObject in " ;
        result << enumerator_16414.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " {\n"
          "      let managedObject = object as PMManagedObject\n"
          "      objects.addObject (managedObject)\n"
          "    }\n" ;
      }else if (kBoolFalse == test_12) {
        result << "    if " ;
        result << enumerator_16414.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << " != nil {\n"
          "      objects.addObject (" ;
        result << enumerator_16414.current_mRelationshipName (HERE).mAttribute_string.stringValue () ;
        result << "!)\n"
          "    }\n" ;
      }
      index_16414_.increment () ;
      enumerator_16414.gotoNextObject () ;
    }
  }
  result << "  }\n"
    "\n"
    "  //-------------------------------------------------------------------------------------------------------------------*\n"
    "\n"
    "}\n"
    "\n" ;
  return GALGAS_string (result) ;
}

//-----------------------------------------------------------------------------*
//                                                                             *
//Filewrapper template 'entityGenerationTemplate entityFactoryImplementationFileInSwift'*
//                                                                             *
//-----------------------------------------------------------------------------*

GALGAS_string filewrapperTemplate_entityGenerationTemplate_entityFactoryImplementationFileInSwift (C_Compiler * /* inCompiler */,
                                                                                                   const GALGAS_entityMap & in_ENTITY_5F_MAP
                                                                                                   COMMA_UNUSED_LOCATION_ARGS) {
  C_String result ;
  result << "//-----------------------------------------------------------------------------*\n"
    "\n"
    "import Cocoa\n"
    "\n"
    "//-----------------------------------------------------------------------------*\n"
    "\n"
    "extension PMObjectManager {\n"
    "\n"
    "  //---------------------------------------------------------------------------*\n"
    "  //  newInstanceOfEntityNamed                                                 *\n"
    "  //---------------------------------------------------------------------------*\n"
    "\n"
    "  func newInstanceOfEntityNamed (inEntityTypeName : String) -> PMManagedObject\? {\n"
    "    var result : PMManagedObject\?\n" ;
  GALGAS_uint index_605_ (0) ;
  if (in_ENTITY_5F_MAP.isValid ()) {
    cEnumerator_entityMap enumerator_605 (in_ENTITY_5F_MAP, kEnumeration_up) ;
    const bool nonEmpty_enumerator_605 = enumerator_605.hasCurrentObject () ;
    if (nonEmpty_enumerator_605) {
      result << "    " ;
    }
    while (enumerator_605.hasCurrentObject ()) {
      result << "if inEntityTypeName == \"" ;
      result << enumerator_605.current_lkey (HERE).mAttribute_string.stringValue () ;
      result << "\" {\n"
        "      result = " ;
      result << enumerator_605.current_lkey (HERE).mAttribute_string.stringValue () ;
      result << " (entityManager:self)\n" ;
      if (enumerator_605.hasNextObject ()) {
        result << "    }else " ;
      }
      index_605_.increment () ;
      enumerator_605.gotoNextObject () ;
    }
    if (nonEmpty_enumerator_605) {
      result << "    }\n" ;
    }
  }
  result << "    if nil != result {\n"
    "      addEntity (result!)\n"
    "    }\n"
    "    return result\n"
    "  }\n"
    "\n"
    "}\n"
    "\n"
    "//-----------------------------------------------------------------------------*\n"
    "\n" ;
  return GALGAS_string (result) ;
}

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap::GALGAS_subEntitiesMap (void) :
AC_GALGAS_listmap () {
}

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap GALGAS_subEntitiesMap::constructor_emptyMap (LOCATION_ARGS) {
  GALGAS_subEntitiesMap result ;
  result.makeNewEmptyListMap (THERE) ;
  return result ;
}

//-----------------------------------------------------------------------------*

void GALGAS_subEntitiesMap::addAssign_operation (const GALGAS_string & inKey,
                                                 const GALGAS_string & inOperand0
                                                 COMMA_LOCATION_ARGS) {
  if (isValid () && inKey.isValid () && inOperand0.isValid ()) {
    capCollectionElement attributes ;
    GALGAS_stringlist::makeAttributesFromObjects (attributes, inOperand0 COMMA_THERE) ;
    addObjectInListMap (inKey.stringValue (), attributes) ;
  }
}

//-----------------------------------------------------------------------------*

GALGAS_stringlist GALGAS_subEntitiesMap::reader_listForKey (const GALGAS_string & inKey
                                                            COMMA_UNUSED_LOCATION_ARGS) const {
  return GALGAS_stringlist (listForKey (inKey)) ;
}

//-----------------------------------------------------------------------------*

cEnumerator_subEntitiesMap::cEnumerator_subEntitiesMap (const GALGAS_subEntitiesMap & inEnumeratedObject,
                                                        const typeEnumerationOrder inOrder) :
cGenericAbstractEnumerator () {
  inEnumeratedObject.populateEnumerationArray (mEnumerationArray, inOrder) ;
}

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap_2D_element cEnumerator_subEntitiesMap::current (LOCATION_ARGS) const {
  const cListMapElement * p = (const cListMapElement *) currentObjectPtr (THERE) ;
  macroValidSharedObject (p, cListMapElement) ;
  return GALGAS_subEntitiesMap_2D_element (p->mKey, p->mSharedListMapList) ;
}

//-----------------------------------------------------------------------------*

GALGAS_string cEnumerator_subEntitiesMap::current_key (LOCATION_ARGS) const {
  const cListMapElement * p = (const cListMapElement *) currentObjectPtr (THERE) ;
  macroValidSharedObject (p, cListMapElement) ;
  return GALGAS_string (p->mKey) ;
}

//-----------------------------------------------------------------------------*

GALGAS_stringlist cEnumerator_subEntitiesMap::current_mList (LOCATION_ARGS) const {
  const cListMapElement * p = (const cListMapElement *) currentObjectPtr (THERE) ;
  macroValidSharedObject (p, cListMapElement) ;
  return GALGAS_stringlist (p->mSharedListMapList) ;
}

//-----------------------------------------------------------------------------*
//                                                                             *
//                            @subEntitiesMap type                             *
//                                                                             *
//-----------------------------------------------------------------------------*

const C_galgas_type_descriptor
kTypeDescriptor_GALGAS_subEntitiesMap ("subEntitiesMap",
                                       NULL) ;

//-----------------------------------------------------------------------------*

const C_galgas_type_descriptor * GALGAS_subEntitiesMap::staticTypeDescriptor (void) const {
  return & kTypeDescriptor_GALGAS_subEntitiesMap ;
}

//-----------------------------------------------------------------------------*

AC_GALGAS_root * GALGAS_subEntitiesMap::clonedObject (void) const {
  AC_GALGAS_root * result = NULL ;
  if (isValid ()) {
    macroMyNew (result, GALGAS_subEntitiesMap (*this)) ;
  }
  return result ;
}

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap GALGAS_subEntitiesMap::extractObject (const GALGAS_object & inObject,
                                                            C_Compiler * inCompiler
                                                            COMMA_LOCATION_ARGS) {
  GALGAS_subEntitiesMap result ;
  const GALGAS_subEntitiesMap * p = (const GALGAS_subEntitiesMap *) inObject.embeddedObject () ;
  if (NULL != p) {
    if (NULL != dynamic_cast <const GALGAS_subEntitiesMap *> (p)) {
      result = *p ;
    }else{
      inCompiler->castError ("subEntitiesMap", p->dynamicTypeDescriptor () COMMA_THERE) ;
    }  
  }
  return result ;
}

//-----------------------------------------------------------------------------*
//                                                                             *
//                       Routine 'generateEntityFactory'                       *
//                                                                             *
//-----------------------------------------------------------------------------*

void routine_generateEntityFactory (const GALGAS_entityMap constinArgument_inEntityMap,
                                    const GALGAS_string constinArgument_inOutputDirectory,
                                    C_Compiler * inCompiler
                                    COMMA_UNUSED_LOCATION_ARGS) {
  GALGAS_string var_s = GALGAS_string (filewrapperTemplate_entityGenerationTemplate_entityFactoryImplementationFileInSwift (inCompiler, constinArgument_inEntityMap COMMA_SOURCE_FILE ("entityGeneration.gSemantics", 169))) ;
  {
  GALGAS_string::class_method_generateFileWithPattern (constinArgument_inOutputDirectory, GALGAS_string ("PMObjectManager+extension+factory.swift"), GALGAS_string ("//"), GALGAS_string ("\n"
    "\n"), var_s, GALGAS_string ("\n"), GALGAS_string ("\n"
    "\n"), inCompiler COMMA_SOURCE_FILE ("entityGeneration.gSemantics", 172)) ;
  }
}


//-----------------------------------------------------------------------------*
//                                                                             *
//            Category Reader '@EXebType hasCustomExplorerFunction'            *
//                                                                             *
//-----------------------------------------------------------------------------*

GALGAS_bool categoryReader_hasCustomExplorerFunction (const GALGAS_EXebType & inObject,
                                                      C_Compiler * /* inCompiler */
                                                      COMMA_UNUSED_LOCATION_ARGS) {
  GALGAS_bool result_outResult ; // Returned variable
  if (inObject.mAttribute_mKind.isValid ()) {
    switch (inObject.mAttribute_mKind.enumValue ()) {
    case GALGAS_EXTypeKind::kNotBuilt:
      break ;
    case GALGAS_EXTypeKind::kEnum_boolType: case GALGAS_EXTypeKind::kEnum_structType: case GALGAS_EXTypeKind::kEnum_enumType: {
      result_outResult = GALGAS_bool (true) ;
      } break ;
    case GALGAS_EXTypeKind::kEnum_imageType: case GALGAS_EXTypeKind::kEnum_integerType: case GALGAS_EXTypeKind::kEnum_uintegerType: case GALGAS_EXTypeKind::kEnum_doubleType: case GALGAS_EXTypeKind::kEnum_stringType: case GALGAS_EXTypeKind::kEnum_bezierPathType: case GALGAS_EXTypeKind::kEnum_menuType: case GALGAS_EXTypeKind::kEnum_dateType: case GALGAS_EXTypeKind::kEnum_colorType: case GALGAS_EXTypeKind::kEnum_dataType: case GALGAS_EXTypeKind::kEnum_fontType: case GALGAS_EXTypeKind::kEnum_protocolType: case GALGAS_EXTypeKind::kEnum_nibClassType: case GALGAS_EXTypeKind::kEnum_outletClassType: case GALGAS_EXTypeKind::kEnum_preferencesType: case GALGAS_EXTypeKind::kEnum_classType: case GALGAS_EXTypeKind::kEnum_controllerClassType: case GALGAS_EXTypeKind::kEnum_documentType: case GALGAS_EXTypeKind::kEnum_entityType: {
      result_outResult = GALGAS_bool (false) ;
      } break ;
    }
  }
//---
  return result_outResult ;
}




//-----------------------------------------------------------------------------*
//                                                                             *
//                   Category Reader '@deleteRuleEnum name'                    *
//                                                                             *
//-----------------------------------------------------------------------------*

GALGAS_string categoryReader_name (const GALGAS_deleteRuleEnum & inObject,
                                   C_Compiler * /* inCompiler */
                                   COMMA_UNUSED_LOCATION_ARGS) {
  GALGAS_string result_outResult ; // Returned variable
  const GALGAS_deleteRuleEnum temp_0 = inObject ;
  if (temp_0.isValid ()) {
    switch (temp_0.enumValue ()) {
    case GALGAS_deleteRuleEnum::kNotBuilt:
      break ;
    case GALGAS_deleteRuleEnum::kEnum_nullifyDeleteRule: {
      result_outResult = GALGAS_string ("NSNullifyDeleteRule") ;
      } break ;
    case GALGAS_deleteRuleEnum::kEnum_cascadeDeleteRule: {
      result_outResult = GALGAS_string ("NSCascadeDeleteRule") ;
      } break ;
    case GALGAS_deleteRuleEnum::kEnum_denyDeleteRule: {
      result_outResult = GALGAS_string ("NSDenyDeleteRule") ;
      } break ;
    }
  }
//---
  return result_outResult ;
}




//-----------------------------------------------------------------------------*
//                                                                             *
//           Overriding category method '@entityGeneration generate'           *
//                                                                             *
//-----------------------------------------------------------------------------*

static void categoryMethod_entityGeneration_generate (const cPtr_generation * inObject,
                                                      const GALGAS_string constinArgument_inOutputDirectory,
                                                      C_Compiler * inCompiler
                                                      COMMA_UNUSED_LOCATION_ARGS) {
  const cPtr_entityGeneration * object = (const cPtr_entityGeneration *) inObject ;
  macroValidSharedObject (object, cPtr_entityGeneration) ;
  GALGAS_stringset var_propertyAndTomanyRelationshipSet = GALGAS_stringset::constructor_emptySet (SOURCE_FILE ("entityGeneration.gSemantics", 124)) ;
  cEnumerator_attributeListForImplementation enumerator_4732 (object->mAttribute_mAttributeListForImplementation, kEnumeration_up) ;
  while (enumerator_4732.hasCurrentObject ()) {
    var_propertyAndTomanyRelationshipSet.addAssign_operation (enumerator_4732.current_mAttributeName (HERE)  COMMA_SOURCE_FILE ("entityGeneration.gSemantics", 126)) ;
    enumerator_4732.gotoNextObject () ;
  }
  cEnumerator__32_stringlist enumerator_4849 (object->mAttribute_mToManyRelationshipList, kEnumeration_up) ;
  while (enumerator_4849.hasCurrentObject ()) {
    var_propertyAndTomanyRelationshipSet.addAssign_operation (enumerator_4849.current_mValue_30_ (HERE)  COMMA_SOURCE_FILE ("entityGeneration.gSemantics", 129)) ;
    enumerator_4849.gotoNextObject () ;
  }
  GALGAS_stringset var_signSet = GALGAS_stringset::constructor_emptySet (SOURCE_FILE ("entityGeneration.gSemantics", 132)) ;
  cEnumerator_signListForGeneration enumerator_5003 (object->mAttribute_mSignList, kEnumeration_up) ;
  while (enumerator_5003.hasCurrentObject ()) {
    var_signSet.addAssign_operation (enumerator_5003.current_mPropertyName (HERE)  COMMA_SOURCE_FILE ("entityGeneration.gSemantics", 134)) ;
    enumerator_5003.gotoNextObject () ;
  }
  GALGAS_string var_s = GALGAS_string (filewrapperTemplate_entityGenerationTemplate_entityImplementationInSwift (inCompiler, object->mAttribute_mGenerationName, object->mAttribute_mAttributeListForImplementation, object->mAttribute_mTransientListForImplementation, object->mAttribute_mAttributeListForInitMethodHeader, object->mAttribute_mInheritedAttributeListForImplementation, object->mAttribute_mFileInclusionSet.mAttribute_mImplementationFileInclusionSet, object->mAttribute_mToManyRelationshipList, var_propertyAndTomanyRelationshipSet, object->mAttribute_mToOneRelationshipList, object->mAttribute_mCurrentRelationshipList, object->mAttribute_mCurrentRelationshipMap, object->mAttribute_mSignList, var_signSet COMMA_SOURCE_FILE ("entityGeneration.gSemantics", 137))) ;
  {
  GALGAS_string::class_method_generateFileWithPattern (constinArgument_inOutputDirectory, object->mAttribute_mGenerationName.operator_concat (GALGAS_string (".swift")  COMMA_SOURCE_FILE ("entityGeneration.gSemantics", 154)), GALGAS_string ("//"), GALGAS_string ("\n"
    "\n"), var_s, GALGAS_string ("\n"
    "\n"), GALGAS_string ("\n"), inCompiler COMMA_SOURCE_FILE ("entityGeneration.gSemantics", 152)) ;
  }
}
//-----------------------------------------------------------------------------*

static void defineCategoryMethod_entityGeneration_generate (void) {
  enterCategoryMethod_generate (kTypeDescriptor_GALGAS_entityGeneration.mSlotID,
                                categoryMethod_entityGeneration_generate) ;
}

//-----------------------------------------------------------------------------*

C_PrologueEpilogue gMethod_entityGeneration_generate (defineCategoryMethod_entityGeneration_generate, NULL) ;

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap_2D_element::GALGAS_subEntitiesMap_2D_element (void) :
mAttribute_key (),
mAttribute_mList () {
}

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap_2D_element::~ GALGAS_subEntitiesMap_2D_element (void) {
}

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap_2D_element::GALGAS_subEntitiesMap_2D_element (const GALGAS_string & inOperand0,
                                                                    const GALGAS_stringlist & inOperand1) :
mAttribute_key (inOperand0),
mAttribute_mList (inOperand1) {
}

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap_2D_element GALGAS_subEntitiesMap_2D_element::constructor_default (UNUSED_LOCATION_ARGS) {
  return GALGAS_subEntitiesMap_2D_element (GALGAS_string::constructor_default (HERE),
                                           GALGAS_stringlist::constructor_emptyList (HERE)) ;
}

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap_2D_element GALGAS_subEntitiesMap_2D_element::constructor_new (const GALGAS_string & inOperand0,
                                                                                    const GALGAS_stringlist & inOperand1 
                                                                                    COMMA_UNUSED_LOCATION_ARGS) {
  GALGAS_subEntitiesMap_2D_element result ;
  if (inOperand0.isValid () && inOperand1.isValid ()) {
    result = GALGAS_subEntitiesMap_2D_element (inOperand0, inOperand1) ;
  }
  return result ;
}

//-----------------------------------------------------------------------------*

typeComparisonResult GALGAS_subEntitiesMap_2D_element::objectCompare (const GALGAS_subEntitiesMap_2D_element & inOperand) const {
   typeComparisonResult result = kOperandEqual ;
  if (result == kOperandEqual) {
    result = mAttribute_key.objectCompare (inOperand.mAttribute_key) ;
  }
  if (result == kOperandEqual) {
    result = mAttribute_mList.objectCompare (inOperand.mAttribute_mList) ;
  }
  return result ;
}

//-----------------------------------------------------------------------------*

bool GALGAS_subEntitiesMap_2D_element::isValid (void) const {
  return mAttribute_key.isValid () && mAttribute_mList.isValid () ;
}

//-----------------------------------------------------------------------------*

void GALGAS_subEntitiesMap_2D_element::drop (void) {
  mAttribute_key.drop () ;
  mAttribute_mList.drop () ;
}

//-----------------------------------------------------------------------------*

void GALGAS_subEntitiesMap_2D_element::description (C_String & ioString,
                                                    const int32_t inIndentation) const {
  ioString << "<struct @subEntitiesMap-element:" ;
  if (! isValid ()) {
    ioString << " not built" ;
  }else{
    mAttribute_key.description (ioString, inIndentation+1) ;
    ioString << ", " ;
    mAttribute_mList.description (ioString, inIndentation+1) ;
  }
  ioString << ">" ;
}

//-----------------------------------------------------------------------------*

GALGAS_string GALGAS_subEntitiesMap_2D_element::reader_key (UNUSED_LOCATION_ARGS) const {
  return mAttribute_key ;
}

//-----------------------------------------------------------------------------*

GALGAS_stringlist GALGAS_subEntitiesMap_2D_element::reader_mList (UNUSED_LOCATION_ARGS) const {
  return mAttribute_mList ;
}



//-----------------------------------------------------------------------------*
//                                                                             *
//                        @subEntitiesMap-element type                         *
//                                                                             *
//-----------------------------------------------------------------------------*

const C_galgas_type_descriptor
kTypeDescriptor_GALGAS_subEntitiesMap_2D_element ("subEntitiesMap-element",
                                                  NULL) ;

//-----------------------------------------------------------------------------*

const C_galgas_type_descriptor * GALGAS_subEntitiesMap_2D_element::staticTypeDescriptor (void) const {
  return & kTypeDescriptor_GALGAS_subEntitiesMap_2D_element ;
}

//-----------------------------------------------------------------------------*

AC_GALGAS_root * GALGAS_subEntitiesMap_2D_element::clonedObject (void) const {
  AC_GALGAS_root * result = NULL ;
  if (isValid ()) {
    macroMyNew (result, GALGAS_subEntitiesMap_2D_element (*this)) ;
  }
  return result ;
}

//-----------------------------------------------------------------------------*

GALGAS_subEntitiesMap_2D_element GALGAS_subEntitiesMap_2D_element::extractObject (const GALGAS_object & inObject,
                                                                                  C_Compiler * inCompiler
                                                                                  COMMA_LOCATION_ARGS) {
  GALGAS_subEntitiesMap_2D_element result ;
  const GALGAS_subEntitiesMap_2D_element * p = (const GALGAS_subEntitiesMap_2D_element *) inObject.embeddedObject () ;
  if (NULL != p) {
    if (NULL != dynamic_cast <const GALGAS_subEntitiesMap_2D_element *> (p)) {
      result = *p ;
    }else{
      inCompiler->castError ("subEntitiesMap-element", p->dynamicTypeDescriptor () COMMA_THERE) ;
    }  
  }
  return result ;
}

//--- START OF USER ZONE 2


//--- END OF USER ZONE 2


