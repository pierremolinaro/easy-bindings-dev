//---------------------------------------------------------------------------*
//                                                                           *
//                         File 'enumAnalysis.cpp'                           *
//                        Generated by version 2.5.0                         *
//                      july 13th, 2013, at 11h32'46"                        *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

#include "enumAnalysis.h"
#include "galgas2/C_Compiler.h"
#include "galgas2/C_galgas_io.h"
#include "galgas2/C_galgas_CLI_Options.h"
#include "utilities/C_PrologueEpilogue.h"

//---------------------------------------------------------------------------*

#include "easyBindings_options.h"

//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "enumAnalysis.gSemantics", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif

//---------------------------------------------------------------------------*
//                                                                           *
//                          Routine 'enumAnalysis'                           *
//                                                                           *
//---------------------------------------------------------------------------*

void routine_enumAnalysis (const GALGAS_enumList constinArgument_inEnumList,
                           GALGAS_contextAnalysisStruct & ioArgument_ioContextAnalysisStruct,
                           C_Compiler * inCompiler
                           COMMA_UNUSED_LOCATION_ARGS) {
  cEnumerator_enumList enumerator_308 (constinArgument_inEnumList, kEnumeration_up) ;
  while (enumerator_308.hasCurrentObject ()) {
    const enumGalgasBool test_0 = ioArgument_ioContextAnalysisStruct.mAttribute_mStructTypeMap.reader_hasKey (enumerator_308.current_mEnumTypeName (HERE).mAttribute_string COMMA_SOURCE_FILE_AT_LINE (12)).boolEnum () ;
    if (kBoolTrue == test_0) {
      GALGAS_location location_1 (enumerator_308.current_mEnumTypeName (HERE).reader_location (HERE)) ; // Implicit use of 'location' reader
      inCompiler->emitSemanticError (location_1, GALGAS_string ("There is a plain old data type with the same name") COMMA_SOURCE_FILE_AT_LINE (13)) ;
    }
    GALGAS_enumConstantMap var_enumConstantMap = GALGAS_enumConstantMap::constructor_emptyMap (SOURCE_FILE_AT_LINE (15)) ;
    cEnumerator_lstringlist enumerator_572 (enumerator_308.current_mEnumConstantNameList (HERE), kEnumeration_up) ;
    while (enumerator_572.hasCurrentObject ()) {
      {
      var_enumConstantMap.modifier_insertKey (enumerator_572.current_mValue (HERE), inCompiler COMMA_SOURCE_FILE_AT_LINE (17)) ;
      }
      enumerator_572.gotoNextObject () ;
    }
    {
    ioArgument_ioContextAnalysisStruct.mAttribute_mEnumMap.modifier_insertKey (enumerator_308.current_mEnumTypeName (HERE), enumerator_308.current_mEnumConstantNameList (HERE), var_enumConstantMap, inCompiler COMMA_SOURCE_FILE_AT_LINE (19)) ;
    }
    enumerator_308.gotoNextObject () ;
  }
  cEnumerator_enumMap enumerator_813 (ioArgument_ioContextAnalysisStruct.mAttribute_mEnumMap, kEnumeration_up) ;
  while (enumerator_813.hasCurrentObject ()) {
    cEnumerator_lstringlist enumerator_849 (enumerator_813.current_mConstantOrderedList (HERE), kEnumeration_up) ;
    while (enumerator_849.hasCurrentObject ()) {
      {
      ioArgument_ioContextAnalysisStruct.mAttribute_mGlobalEnumConstantMap.modifier_insertKey (enumerator_849.current_mValue (HERE), enumerator_813.current_lkey (HERE), inCompiler COMMA_SOURCE_FILE_AT_LINE (24)) ;
      }
      enumerator_849.gotoNextObject () ;
    }
    enumerator_813.gotoNextObject () ;
  }
}


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2


