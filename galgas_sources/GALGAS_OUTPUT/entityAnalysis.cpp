//---------------------------------------------------------------------------*
//                                                                           *
//                        File 'entityAnalysis.cpp'                          *
//                        Generated by version 2.5.0                         *
//                       july 18th, 2013, at 14h45'9"                        *
//                                                                           *
//---------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1

#include "entityAnalysis.h"
#include "galgas2/C_Compiler.h"
#include "galgas2/C_galgas_io.h"
#include "galgas2/C_galgas_CLI_Options.h"
#include "utilities/C_PrologueEpilogue.h"

//---------------------------------------------------------------------------*


//---------------------------------------------------------------------------*

#ifndef DO_NOT_GENERATE_CHECKINGS
  #define SOURCE_FILE_AT_LINE(line) "entityAnalysis.gSemantics", line
  #define COMMA_SOURCE_FILE_AT_LINE(line) , SOURCE_FILE_AT_LINE(line)
#else
  #define SOURCE_FILE_AT_LINE(line) 
  #define COMMA_SOURCE_FILE_AT_LINE(line) 
#endif

//---------------------------------------------------------------------------*
//                                                                           *
//                        Routine 'entityEnterTypes'                         *
//                                                                           *
//---------------------------------------------------------------------------*

void routine_entityEnterTypes (const GALGAS_entityList_2E_element constinArgument0,
                               GALGAS_unifiedTypeMap & ioArgument1,
                               C_Compiler * inCompiler
                               COMMA_LOCATION_ARGS) ;

//---------------------------------------------------------------------------*
//                                                                           *
//                        Routine 'entityEnterTypes'                         *
//                                                                           *
//---------------------------------------------------------------------------*

void routine_entityEnterTypes (const GALGAS_entityList_2E_element constinArgument_inEntity,
                               GALGAS_unifiedTypeMap & ioArgument_ioUnifiedTypeMap,
                               C_Compiler * inCompiler
                               COMMA_UNUSED_LOCATION_ARGS) {
  GALGAS_unifiedTypeProxy var_superClassProxy ;
  const enumGalgasBool test_0 = GALGAS_bool (kIsEqual, constinArgument_inEntity.mAttribute_mSuperEntityName.mAttribute_string.objectCompare (GALGAS_string::makeEmptyString ())).boolEnum () ;
  if (kBoolTrue == test_0) {
    var_superClassProxy = GALGAS_unifiedTypeProxy::constructor_null (SOURCE_FILE_AT_LINE (17)) ;
  }else if (kBoolFalse == test_0) {
    {
    GALGAS_unifiedTypeProxy::class_method_makeProxy (ioArgument_ioUnifiedTypeMap, constinArgument_inEntity.mAttribute_mSuperEntityName, var_superClassProxy COMMA_SOURCE_FILE_AT_LINE (19)) ;
    }
  }
  GALGAS_observablePropertyMap var_observablePropertyMap = GALGAS_observablePropertyMap::constructor_emptyMap (SOURCE_FILE_AT_LINE (26)) ;
  {
  routine_attributeDeclarationEnterType (constinArgument_inEntity.mAttribute_mAttributeList, GALGAS_classArrayList::constructor_emptyList (SOURCE_FILE_AT_LINE (29)), GALGAS_string ("entity.").operator_concat (constinArgument_inEntity.mAttribute_mEntityName.reader_string (SOURCE_FILE_AT_LINE (30)) COMMA_SOURCE_FILE_AT_LINE (30)), ioArgument_ioUnifiedTypeMap, var_observablePropertyMap, inCompiler COMMA_SOURCE_FILE_AT_LINE (27)) ;
  }
  {
  routine_transientDeclarationEnterType (constinArgument_inEntity.mAttribute_mTransientList, GALGAS_string ("entity.").operator_concat (constinArgument_inEntity.mAttribute_mEntityName.reader_string (SOURCE_FILE_AT_LINE (37)) COMMA_SOURCE_FILE_AT_LINE (37)), ioArgument_ioUnifiedTypeMap, var_observablePropertyMap, inCompiler COMMA_SOURCE_FILE_AT_LINE (35)) ;
  }
  cEnumerator_relationshipList enumerator_1521 (constinArgument_inEntity.mAttribute_mRelationshipList, kEnumeration_up) ;
  while (enumerator_1521.hasCurrentObject ()) {
    GALGAS_unifiedTypeProxy var_type ;
    {
    GALGAS_unifiedTypeProxy::class_method_makeProxy (ioArgument_ioUnifiedTypeMap, enumerator_1521.current_mDestinationEntityName (HERE), var_type COMMA_SOURCE_FILE_AT_LINE (43)) ;
    }
    {
    var_observablePropertyMap.modifier_insertKey (enumerator_1521.current_mRelationshipName (HERE), var_type, GALGAS_bool (false), GALGAS_string ("entity.").operator_concat (constinArgument_inEntity.mAttribute_mEntityName.reader_string (SOURCE_FILE_AT_LINE (52)) COMMA_SOURCE_FILE_AT_LINE (52)).operator_concat (GALGAS_string (".") COMMA_SOURCE_FILE_AT_LINE (52)).operator_concat (enumerator_1521.current_mRelationshipName (HERE).reader_string (SOURCE_FILE_AT_LINE (52)) COMMA_SOURCE_FILE_AT_LINE (52)), enumerator_1521.current_mIsToMany (HERE), inCompiler COMMA_SOURCE_FILE_AT_LINE (48)) ;
    }
    enumerator_1521.gotoNextObject () ;
  }
  {
  ioArgument_ioUnifiedTypeMap.modifier_insertKey (constinArgument_inEntity.mAttribute_mEntityName, GALGAS_entityType::constructor_new (var_superClassProxy, var_observablePropertyMap COMMA_SOURCE_FILE_AT_LINE (59)), inCompiler COMMA_SOURCE_FILE_AT_LINE (57)) ;
  }
}


//---------------------------------------------------------------------------*
//                                                                           *
//                       Routine 'entitiesEnterTypes'                        *
//                                                                           *
//---------------------------------------------------------------------------*

void routine_entitiesEnterTypes (const GALGAS_entityList constinArgument_inEntityList,
                                 GALGAS_unifiedTypeMap & ioArgument_ioUnifiedTypeMap,
                                 C_Compiler * inCompiler
                                 COMMA_UNUSED_LOCATION_ARGS) {
  cEnumerator_entityList enumerator_2317 (constinArgument_inEntityList, kEnumeration_up) ;
  while (enumerator_2317.hasCurrentObject ()) {
    {
    routine_entityEnterTypes (enumerator_2317.current (HERE), ioArgument_ioUnifiedTypeMap, inCompiler COMMA_SOURCE_FILE_AT_LINE (74)) ;
    }
    enumerator_2317.gotoNextObject () ;
  }
}


//--- START OF USER ZONE 2


//--- END OF USER ZONE 2


