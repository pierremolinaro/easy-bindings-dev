%!TEX encoding = UTF-8 Unicode

\documentclass [a4paper, 11pt, openany] {book}
\usepackage{verbatim}
%\usepackage{geometry}                % See geometry.pdf to learn the layout options. There are lots.
%\geometry{a4paper}                   % ... or a4paper or a5paper or ... 
%\geometry{landscape}                % Activate for for rotated page geometry
%\usepackage[parfill]{parskip}    % Activate to begin paragraphs with an empty line rather than an indent
%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   E N C O D A G E    D E S    S O U R C E S     :     U T F 8                                                         *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Paquetage pour le codage des sources en UTF-8
\usepackage[utf8]{inputenc}

%--- Latex demande ce paquetage pour mieux afficher le caractère "°" et \textquotesingle "'"
\usepackage{textcomp}

%--- Ce paquetage permet d'effectuer certaines césures, et ainsi d'éviter les messages "Overfull \hbox"
\usepackage[T1]{fontenc}

\usepackage{lmodern} % for French

\usepackage{filecontents}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   R É G L A G E S    « F R A N Ç A I S »                                                                              *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Paquetage pour imposer les réglages français
%\usepackage[francais]{babel}
\usepackage[frenchb]{babel}

%--- Contrôle de l'indentation et de la séparation des paragraphes
\setlength{\parindent}{0pt} 
%\setlength{\parskip}{1.2ex} % Reporté avant les chapitres

%--- Ajouter une séparation à la fin des itemize
\let\EndItemize\enditemize
\def\enditemize{\EndItemize\vspace{1.2ex}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   M I S E    E N    P A G E                                                                                           *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% Voir "Une courte introduction à Latex2e", § 6.4

%--- Marge gauche : 2,8 cm ; le paramètre \hoffset contient cette valeur, moins 1 pouce
%    \hoffset = 2,8 cm - 2,54 cm = 0,26 cm
\setlength{\hoffset}{0.26 cm}

%--- Marges supplémentaires, différenciées pour les pages gauches et droites ; ici, aucune.
\setlength{\oddsidemargin }{0 cm}
\setlength{\evensidemargin}{0 cm}

%--- Largeur du texte
%    \textwidth = 210 mm - 28 mm - 28 mm = 15,4 cm
\setlength{\textwidth}{15.4 cm}

%--- Marge haute : 2,8 cm ; le paramètre \voffset contient cette valeur, moins 1 pouce
%    \voffset = 2,8 cm - 2,54 cm = 0,26 cm
\setlength{\voffset}{0.26 cm}

%--- Distance entre la marge haute et l'en-tête : 0 cm
\setlength{\topmargin}{0 cm}

%--- Hauteur de l'en-tête de chaque page : 1 cm
\setlength{\headheight}{1 cm}

%--- Distance entre l'en-tête de chaque page et le corps : 0,5 cm
\setlength{\headsep}{0.5 cm}

%--- Hauteur du corps
%    \textheight = 29,7 cm - 2,8 cm - 2,8 cm - 1,5 cm = 22,6 cm
\setlength{\textheight}{22.6 cm}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   T R A C E R    U N E    L I G N E    H O R I Z O N T A L E                                                          *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\newcommand\ligne{\hrulefill}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   C H O I X    D E    L A    P O L I C E                                                                              *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%---------------------------------------------------- Pour utiliser la police "Fourier"
%\usepackage{fouriernc}
%\usepackage[scaled=0.875]{helvet}

%\usepackage[scaled=0.8, default]{sourcesanspro}
\usepackage[scaled=0.9, default, semibold]{sourcecodepro}
\usepackage[default]{sourcesanspro}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   E X T E N S I O N S    P O U R    P R É S E N T E R    L E S    T A B L E A U X                                     *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\usepackage{array}
\usepackage[table]{xcolor} % À placer avant \usepackage{listings}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   T I K Z    -    P G F                                                                                               *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\usepackage{tikz}
\usetikzlibrary{calc}
\usepackage{pgfplots}
\usetikzlibrary{arrows}
\usetikzlibrary{decorations}
\usetikzlibrary{decorations.pathmorphing}
\usetikzlibrary{shapes.callouts}
\usetikzlibrary{shapes.misc}
\usetikzlibrary{automata}
\usetikzlibrary{positioning}
\usepgflibrary{shapes.geometric}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   E N - T Ê T E S    E T    P I E D S    D E    P A G E S                                                             *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% Grâce au package "fancyhdr"
% voir http://www.exomatik.net/U-Latex/Personnaliser#toc2
%      http://www.trustonme.net/didactels/250.html
\usepackage{fancyhdr}
\pagestyle{fancy}
%--- Numéro de page : à gauche pages paires, à droite pages impaires
\fancyhead[EL,OR]{\thepage}
%--- Nom de chapitre : à droite page paires
\fancyhead[ER]{\leftmark}
%--- Nom de section : à gauche page impaires
\fancyhead[OL]{\rightmark}
%--- Version : au milieu du pied de chaque page
\fancyfoot[C]{Easy Bindings}
%--- filet en haut et en bas de chaque page
\renewcommand{\headrulewidth}{0.5 pt}
\renewcommand{\footrulewidth}{0.5 pt}

\renewcommand{\chaptermark}[1]{\markboth{\bsc{\chaptername~\thechapter{}.} #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\bsc{\thesection{}.} #1}{}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   G E S T I O N    D E    L ' I N D E X                                                                               *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% http://www.cuk.ch/articles/4097
% http://www.tuteurs.ens.fr/logiciels/latex/makeindex.html
% http://linux.die.net/man/1/makeindex
%
% Attention ! Les deux commandes suivantes, ainsi que le \printindex placé plus bas ne
% sont pas suffisants pour construire l'index : il faut utiliser l'utilitaire "makeIndex"
% Voir le fichier de commande "build.command"
\usepackage{makeidx}
\makeindex

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   T O C B I D I N D                                                                                                   *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%    Pour faire figurer la liste des tableaux (et la table des matières)
%    dans la table des matières
\usepackage{tocbibind}

\setcounter{tocdepth}{3}

%\titlespacing{\chapter} {0pt} {*0} {*0} {}
%\titlespacing{\section} {4ex} {*0} {*0} {}
%\titlespacing{\subsection} {10ex} {*0} {*0} {}
%\titlespacing{\subsubsection} {\subsubsectskip} {*0} {*0} {}

%\setlength{\parindent}{50pt}
%\makeatletter
%\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
%                                    {3.25ex \@plus 1ex \@minus .2ex}%
%                                    {2.3ex \ at plus.2ex}%
%                                    {\normalfont\normalsize\bfseries}}
%\makeatother

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   H Y P E R R E F                                                                                                     *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Pour les hyperliens, et le contrôle de la génération PDF 
\usepackage{hyperref}
\hypersetup{colorlinks=true}
\hypersetup{linkcolor=blue}
\hypersetup{breaklinks=true}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   R É F É R E N C E S                                                                                                 *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

% Au lieu d'écrire \chapter{titre-chapitre}, on écrit \chapterLabel{titre-chapitre}{label-chapitre}
\newcommand \chapterLabel[2]{\chapter{#1}\label{chapter:#2}}

% \refChapter{label-chapter} ---> "chapitre n"
\newcommand \refChapter[1]{\hyperref[chapter:#1]{chapitre \ref*{chapter:#1}}}

\newcommand \refChapterPage[1]{\hyperref[chapter:#1]{chapitre \ref*{chapter:#1} page \pageref{chapter:#1}}}

% Au lieu d'écrire \section{titre-section}, on écrit \sectionLabel{titre-section}{label-section}
\newcommand \sectionLabel[2]{\section{#1}\label{sec:#2}}


% \refSectionPage{label-section} ---> "section x.y page n"   où x.y est le n° de la section
\newcommand\refSectionPage[1]{\hyperref[sec:#1]{section \ref*{sec:#1} page \pageref{sec:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UNE SUB-SECTION
% Au lieu d'écrire \subsection{titre-section}, on écrit \subsectionLabel{titre-section}{label-section}
\newcommand \subsectionLabel[2]{\subsection{#1}\label{subsec:#2}}


% \refSubsectionPage{label-section} ---> "section x.y page n"   où x.y est le n° de la sub-section
\newcommand\refSubsectionPage[1]{\hyperref[subsec:#1]{section \ref*{subsec:#1} page \pageref{subsec:#1}}}

%------------------------------------------------------------------------------------------ RÉFÉRENCES À UNE FIGURE
% La référence au tableau "nom-de-la-figure" est définie par \labelFigure{nom-de-la-figure}
\newcommand\labelFigure[1]{\label{fig:#1}}
% Latex autorise deux types d'appel à une référence \ref{fig:nom-de-la-figure} et \pageref{fig:nom-de-la-figure}

% \refFigure{}{nom-de-la-figure}   ---> "figure x.y"   où x.y est le n° de la figure
% \refFigure{z}{nom-de-la-figure}  ---> "figure x.y.z" où x.y est le n° de la figure
\newcommand\refFigure[2]{\hyperref[fig:#2]{figure \ref*{fig:#2}{\ifthenelse{\equal{#1}{}}{}{.#1}}}}

% \refFigureSansPrefixe{}{nom-de-la-figure}   ---> "x.y"   où x.y est le n° de la figure
% \refFigureSansPrefixe{z}{nom-de-la-figure}  ---> "x.y.z" où x.y est le n° de la figure
\newcommand\refFigureSansPrefixe[2]{\hyperref[fig:#2]{\ref*{fig:#2}{\ifthenelse{\equal{#1}{}}{}{.#1}}}}

% \refFigurePage{}{nom-de-la-figure}   ---> "figure x.y page n"   où x.y est le n° de la figure
% \refFigurePage{z}{nom-de-la-figure}  ---> "figure x.y.z page n" où x.y est le n° de la figure
\newcommand\refFigurePage[2]{\hyperref[fig:#2]{figure \ref*{fig:#2}{\ifthenelse{\equal{#1}{}}{}{.#1}} page \pageref{fig:#2}}}

% \refFigurePageSansPrefixe{}{nom-de-la-figure}   ---> "x.y page n"   où x.y est le n° de la figure
% \refFigurePageSansPrefixe{z}{nom-de-la-figure}  ---> "x.y.z page n" où x.y est le n° de la figure
\newcommand\refFigurePageSansPrefixe[2]{\hyperref[fig:#2]{\ref*{fig:#2}{\ifthenelse{\equal{#1}{}}{}{.#1}} page \pageref{fig:#2}}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   E X T E N S I O N S    P O U R    L ' É C R I T U R E    D E S     F O R M U L E S    M A T H É M A T I Q U E S     *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{epstopdf}
\DeclareGraphicsRule{.tif}{png}{.png}{`convert #1 `dirname #1`/`basename #1 .tif`.png}

%-----------------------------------------------------------------------------------------------------------------------*
%   A F F I C H A G E    D U    C O D E    S H E L L                                                                    *
%-----------------------------------------------------------------------------------------------------------------------*

\newcommand\tpp[1]{\colorbox{gray!12}{\ttfamily #1}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   C O D E   S O U R C E    E A S Y - B I N D I N G S                                                                  *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\usepackage{mdframed}

\newcommand\idfStyleEB[1]{\textcolor{gray}{#1}}
\newcommand\IdfStyleEB[1]{\textcolor{gray}{#1}}
\newcommand\bindingNameStyleEB[1]{\textcolor{orange}{#1}}

\newcommand\keywordsStyleEB[1]{\textcolor{blue}{\textbf{#1}}}
\newcommand\delimitersStyleEB[1]{\textcolor{brown}{\textbf{#1}}}
\newcommand\terminalStyleEB[1]{\textcolor{orange}{#1}}
\newcommand\nonTerminalStyleEB[1]{\textcolor{orange}{#1}}
\newcommand\integerStyleEB[1]{\textcolor{brown}{#1}}
\newcommand\floatStyleEB[1]{\textcolor{magenta}{#1}}
\newcommand\characterStyleEB[1]{\textcolor{cyan}{#1}}
\newcommand\stringStyleEB[1]{\textcolor{gray}{#1}}
\newcommand\typeNameStyleEB[1]{\textcolor{gray}{#1}}
\newcommand\attributeStyleEB[1]{\textcolor{brown}{#1}}
\newcommand\commentStyleEB[1]{\textcolor{red}{#1}}

%\newcommand\lexicalErrorEB{\textcolor{red}{\textbullet ERRLEX\textbullet}}

\newcommand\idfStyleeb[1]{\textcolor{gray}{#1}}
\newcommand\IdfStyleeb[1]{\textcolor{gray}{#1}}
\newcommand\bindingNameStyleeb[1]{\textcolor{orange}{#1}}

\newcommand\keywordsStyleeb[1]{\textcolor{blue}{\textbf{#1}}}
\newcommand\delimitersStyleeb[1]{\textcolor{brown}{\textbf{#1}}}
\newcommand\selectorStyleeb[1]{\textcolor{orange}{#1}}
\newcommand\terminalStyleeb[1]{\textcolor{orange}{#1}}
\newcommand\nonTerminalStyleeb[1]{\textcolor{orange}{#1}}
\newcommand\integerStyleeb[1]{\textcolor{brown}{#1}}
\newcommand\floatStyleeb[1]{\textcolor{magenta}{#1}}
\newcommand\characterStyleeb[1]{\textcolor{cyan}{#1}}
\newcommand\stringStyleeb[1]{\textcolor{gray}{#1}}
\newcommand\typeNameStyleeb[1]{\textcolor{gray}{#1}}
\newcommand\attributeStyleeb[1]{\textcolor{brown}{#1}}
\newcommand\commentStyleeb[1]{\textcolor{red}{#1}}

%\newcommand\lexicalErroreb{\textcolor{red}{\textbullet ERRLEX\textbullet}}

\newmdenv[
  topline=false,
  bottomline=false,
  rightline=false,
%  skipabove=\topsep,
%  skipbelow=\topsep,
  linecolor=blue!25,
  linewidth=2pt
]{siderules}

\newwrite\tempfile

\makeatletter
\newenvironment{ebcode}{%
  \begingroup
  \@bsphack
  \immediate\openout\tempfile=temp.eb%
  \let\do\@makeother\dospecials
  \catcode`\^^M\active
  \verbatim@startline
  \verbatim@addtoline
  \verbatim@finish
  \def\verbatim@processline{\immediate\write\tempfile{\the\verbatim@line}}%
  \verbatim@start
}{
  \immediate\closeout\tempfile
  \@esphack
  \endgroup
  \immediate\write18{eb --mode=latex:eb temp.eb}
  {\begin{siderules}\small\ttfamily\input{temp.eb.tex}\end{siderules}}
}
\makeatother

%-----------------------------------------------------------------------------------------------------------------------*
% COMMANDE \eb : affichage de code en ligne eb                                                                          *
%-----------------------------------------------------------------------------------------------------------------------*

\makeatletter
\newcommand*\eb{%
  \@bsphack%
  \begingroup%
  \let\do\@makeother\dospecials%
  \let\do\do@noligs\verbatim@nolig@list%
  \catcode`\^^M=15\relax%
  \@vobeyspaces%
  \@eb{\temporary}%
}%
\newcommand\@eb[2]{%
  \catcode`-=12\relax%
  \catcode`<=12\relax%
  \catcode`>=12\relax%
  \catcode`,=12\relax%
  \catcode`'=12\relax%
  \catcode``=12\relax%
  \catcode`#2\active%
  \catcode`~\active%
  \lccode`\~`#2\relax%
  \begingroup%
  \lowercase{%
    \def\@tempa##1~{%
      \expandafter\endgroup%
      \expandafter\DeclareRobustCommand%
      \expandafter*%
      \expandafter#1%
      \expandafter{\@tempa}%
      \@esphack%
      \immediate\openout\tempfile=temp.eb%
      \immediate\write\tempfile{##1}%
      \immediate\closeout\tempfile%
      \immediate\write18{eb --mode=latex:eb temp.eb}%
      \colorbox{gray!6}{\ttfamily\input{temp.eb.tex}\unskip}%
    }%
  }%
  \ifnum`#2=`\~\else\@makeother\~\fi%
  \expandafter\endgroup%
  \@tempa%
}%
\makeatother

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   D É B U T    D U    D O C U M E N T                                                                                 *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*


\begin{document} 

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   P A G E    D E    T I T R E                                                                                         *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*


\title{\Huge\bf Easy Bindings}
\author{Pierre Molinaro}
\date \today 
\maketitle

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   T A B L E    D E S    M A T I È R E S                                                                               *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\tableofcontents
 
%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   L I S T E    D E S    T A B L E A U X                                                                               *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\listoftables
\addtocontents{lot}{\protect\thispagestyle{empty}\protect\pagestyle{empty}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   L I S T E    D E S    F I G U R E S                                                                                 *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

\listoffigures
\addtocontents{lof}{\protect\thispagestyle{empty}\protect\pagestyle{empty}}

%-----------------------------------------------------------------------------------------------------------------------*
%                                                                                                                       *
%   L E S    C H A P I T R E S                                                                                          *
%                                                                                                                       *
%-----------------------------------------------------------------------------------------------------------------------*

%--- Contrôle de la séparation des paragraphes
%    On met cette définition ici, sinon elle affecte la table des matières, la liste des tableaux, ...
\setlength{\parskip}{1.2ex}

\input{chapitres/chapitre-tutorial.tex}
\input{chapitres/chapitre-structure-globale.tex}
\input{chapitres/chapitre-template-controleur.tex}
\input{chapitres/chapitre-preferences.tex}
\input{chapitres/chapitre-proprietes-observables.tex}
\input{chapitres/chapitre-array-controller.tex}

\end{document}