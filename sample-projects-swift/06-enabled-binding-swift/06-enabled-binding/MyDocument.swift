//-----------------------------------------------------------------------------*
//                                                                             *
//                          File 'MyDocument.swift'                            *
//                         Generated by version 0.0.1                          *
//                        july 28th, 2014, at 21h5'21"                         *
//                                                                             *
//-----------------------------------------------------------------------------*

//--- START OF USER ZONE 1


//--- END OF USER ZONE 1


import Cocoa

//-----------------------------------------------------------------------------*

@objc(MyDocument) class MyDocument : PMManagedDocument {

  //---------------------------------------------------------------------------*
  //    Outlets                                                                *
  //---------------------------------------------------------------------------*

  @IBOutlet var docBoolCheckBox : NSButton
  @IBOutlet var myButton : NSButton

  //---------------------------------------------------------------------------*
  //    Controllers                                                            *
  //---------------------------------------------------------------------------*


  //---------------------------------------------------------------------------*
  //    Documents attributes                                                   *
  //---------------------------------------------------------------------------*


  //---------------------------------------------------------------------------*
  //    init                                                                   *
  //---------------------------------------------------------------------------*

  init () {
    let em = PMObjectManager ()
    super.init (inEntityManager:em)
  }
  
  //---------------------------------------------------------------------------*
  //    windowNibName                                                          *
  //---------------------------------------------------------------------------*

  var windowNibName: String {
    return "MyDocument"
  }

  //---------------------------------------------------------------------------*
  //    rootEntityClassName                                                    *
  //---------------------------------------------------------------------------*

  override func rootEntityClassName () -> String {
    return "MyRootEntity"
  }

  //---------------------------------------------------------------------------*
  //    rootObject                                                             *
  //---------------------------------------------------------------------------*

  var rootObject : MyRootEntity {
    get {
      return mRootObject as MyRootEntity
    }
  }

  //---------------------------------------------------------------------------*
  //    windowControllerDidLoadNib                                             *
  //---------------------------------------------------------------------------*

  override func windowControllerDidLoadNib (aController: NSWindowController) {
    super.windowControllerDidLoadNib (aController)
  //--------------------------- Controller bindings
  //--------------------------- Outlet bindings
  //--- Outlet docBoolCheckBox
    if nil == docBoolCheckBox {
      presentErrorWindow (__FILE__, __LINE__, "the 'docBoolCheckBox' outlet is nil") ;
    }
    docBoolCheckBox.bind ("value",
      toObject:mRootObject,
      withKeyPath:"docBool",
      options:nil
    )
  //--- Outlet myButton
    if nil == myButton {
      presentErrorWindow (__FILE__, __LINE__, "the 'myButton' outlet is nil") ;
    }
    myButton.bind ("enabled",
      toObject:mRootObject,
      withKeyPath:"docBool",
      options:[
        "NSValueTransformerName" : NSNegateBooleanTransformerName
      ]
    )
    myButton.bind ("enabled2",
      toObject:g_MyPrefs,
      withKeyPath:"prefBoolean",
      options:nil
    )
  //--------------------------- Add Transient observers
  //--------------------------- Add Signature observer
}

  //---------------------------------------------------------------------------*
  //   R E M O V E    W I N D O W    C O N T R O L L E R                       *
  //---------------------------------------------------------------------------*

  override func removeWindowController (inWindowController : NSWindowController) {
  //--------------------------- Add Signature observer
  //--- Unbind Outlets
    docBoolCheckBox.unbind ("value")
    myButton.unbind ("enabled2")
    myButton.unbind ("enabled")
  //--- Unbind Controllers
  //--- Remove Transient observers
  //--- Release controllers
  //--- Remove circularities in outlets
  //---
    super.removeWindowController (inWindowController)
  }

}

//-----------------------------------------------------------------------------*

//--- START OF USER ZONE 2


//--- END OF USER ZONE 2


