//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//  THIS FILE IS GENERATED BY EASY BINDINGS, DO NOT MODIFY IT
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import Cocoa

//————————————————————————————————————————————————————————————————————————————————————————————————————————————————————*

var g_Preferences : Preferences? = nil

//————————————————————————————————————————————————————————————————————————————————————————————————————————————————————*

let Preferences_myString = "Preferences:myString"
let Preferences_mColor = "Preferences:mColor"
let Preferences_mDate = "Preferences:mDate"
let Preferences_mIntegerValue = "Preferences:mIntegerValue"

//————————————————————————————————————————————————————————————————————————————————————————————————————————————————————*

@objc(Preferences) class Preferences : EBObject, NSWindowDelegate {

  //····················································································································
  //   Atomic property: myString
  //····················································································································

  var myString_property = EBStoredProperty_String ("hello", prefKey: Preferences_myString)

  //····················································································································

  var myString : String {
    get {
      return self.myString_property.propval
    }
    set {
      self.myString_property.setProp (newValue)
    }
  }

  //····················································································································

  var myString_property_selection : EBSelection <String> {
    return self.myString_property.prop
  }

  //····················································································································
  //   Atomic property: mColor
  //····················································································································

  var mColor_property = EBStoredProperty_NSColor (NSColor.yellow, prefKey: Preferences_mColor)

  //····················································································································

  var mColor : NSColor {
    get {
      return self.mColor_property.propval
    }
    set {
      self.mColor_property.setProp (newValue)
    }
  }

  //····················································································································

  var mColor_property_selection : EBSelection <NSColor> {
    return self.mColor_property.prop
  }

  //····················································································································
  //   Atomic property: mDate
  //····················································································································

  var mDate_property = EBStoredProperty_Date (Date (), prefKey: Preferences_mDate)

  //····················································································································

  var mDate : Date {
    get {
      return self.mDate_property.propval
    }
    set {
      self.mDate_property.setProp (newValue)
    }
  }

  //····················································································································

  var mDate_property_selection : EBSelection <Date> {
    return self.mDate_property.prop
  }

  //····················································································································
  //   Atomic property: mIntegerValue
  //····················································································································

  var mIntegerValue_property = EBStoredProperty_Int (12, prefKey: Preferences_mIntegerValue)

  //····················································································································

  var mIntegerValue : Int {
    get {
      return self.mIntegerValue_property.propval
    }
    set {
      self.mIntegerValue_property.setProp (newValue)
    }
  }

  //····················································································································

  var mIntegerValue_property_selection : EBSelection <Int> {
    return self.mIntegerValue_property.prop
  }

  //····················································································································

  func mIntegerValue_validateAndSetProp (_ inCandidateValue : Int, windowForSheet inWindow:NSWindow?) -> Bool {
    return self.mIntegerValue_property.validateAndSetProp (inCandidateValue, windowForSheet:inWindow)
  }

  //····················································································································
  //    Outlets
  //····················································································································

  @IBOutlet var mColorWell : EBColorWell? = nil
  @IBOutlet var mContinuousColorWell : EBColorWell? = nil
  @IBOutlet var mDatePicker : EBDatePicker? = nil
  @IBOutlet var mIntegerObserverTextField : EBIntObserverField? = nil
  @IBOutlet var mIntegerTextField : EBIntField? = nil
  @IBOutlet var mObserverColorWell : EBColorObserverWell? = nil
  @IBOutlet var myObserverTextField : EBTextObserverField? = nil
  @IBOutlet var myOtherTextField : EBTextField? = nil
  @IBOutlet var myTextField : EBTextField? = nil

  //····················································································································
  //    Multiple bindings controllers
  //····················································································································


  //····················································································································
  //    Undo Manager
  //····················································································································

  private var undoManager = EBUndoManager ()

  //····················································································································
  // The preferences window should register this object as delegate (do it in Interface Builder)

  @objc func windowWillReturnUndoManager (_ window: NSWindow) -> UndoManager? {
    return self.undoManager
  }

  //····················································································································
  //    Init
  //····················································································································

  override init () {
    super.init ()
    g_Preferences = self ;
  //--- Read from preferences
  //--- Atomic property: myString
    self.myString_property.undoManager = self.undoManager
  //--- Atomic property: mColor
    self.mColor_property.undoManager = self.undoManager
  //--- Atomic property: mDate
    self.mDate_property.undoManager = self.undoManager
  //--- Atomic property: mIntegerValue
    self.mIntegerValue_property.undoManager = self.undoManager
    self.mIntegerValue_property.validationFunction = self.validate_mIntegerValue
  //--- Notify application will terminate
    NotificationCenter.default.addObserver (self,
      selector:#selector(Preferences.applicationWillTerminateAction(_:)),
      name:NSApplication.willTerminateNotification,
      object:nil
    )
  //--- Extern functions
  }

  //····················································································································

  @IBOutlet private var window : NSWindow?
  let OUTLET_WIDTH = 200.0
  let OUTLET_HEIGHT = 22.0

  //····················································································································
  //    awakeFromNib
  //····················································································································

  override func awakeFromNib () {
    var y = OUTLET_HEIGHT * 1.5 * 9.0
    let view = NSView (frame:NSRect (x:0.0, y:0.0, width:10.0, height:10.0))
    y -= OUTLET_HEIGHT
  //--- Text String:
  //  createTextFieldForText ("String:", y:&y, col:0, view:view)
    let tf1 = NSTextField (frame:NSRect (x:10.0 + OUTLET_WIDTH * 0.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    tf1.stringValue = "String:"
    tf1.isEditable = false
    tf1.drawsBackground = false
    tf1.isBordered = false
    view.addSubview (tf1)
  //--- Outlet myTextField
    myTextField = EBTextField(frame:NSRect (x:10.0 + OUTLET_WIDTH * 1.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    myTextField?.setAccessibilityIdentifier ("myTextField")
    view.addSubview (myTextField!)
    y -= OUTLET_HEIGHT / 2.0
    y -= OUTLET_HEIGHT
  //--- Text String (send continously): 
  //  createTextFieldForText ("String (send continously): ", y:&y, col:0, view:view)
    let tf2 = NSTextField (frame:NSRect (x:10.0 + OUTLET_WIDTH * 0.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    tf2.stringValue = "String (send continously): "
    tf2.isEditable = false
    tf2.drawsBackground = false
    tf2.isBordered = false
    view.addSubview (tf2)
  //--- Outlet myOtherTextField
    myOtherTextField = EBTextField(frame:NSRect (x:10.0 + OUTLET_WIDTH * 1.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    myOtherTextField?.setAccessibilityIdentifier ("myOtherTextField")
    view.addSubview (myOtherTextField!)
    y -= OUTLET_HEIGHT / 2.0
    y -= OUTLET_HEIGHT
  //--- Text String observer:
  //  createTextFieldForText ("String observer:", y:&y, col:0, view:view)
    let tf3 = NSTextField (frame:NSRect (x:10.0 + OUTLET_WIDTH * 0.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    tf3.stringValue = "String observer:"
    tf3.isEditable = false
    tf3.drawsBackground = false
    tf3.isBordered = false
    view.addSubview (tf3)
  //--- Outlet myObserverTextField
    myObserverTextField = EBTextObserverField(frame:NSRect (x:10.0 + OUTLET_WIDTH * 1.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    myObserverTextField?.setAccessibilityIdentifier ("myObserverTextField")
    view.addSubview (myObserverTextField!)
    y -= OUTLET_HEIGHT / 2.0
    y -= OUTLET_HEIGHT
  //--- Text Color:
  //  createTextFieldForText ("Color:", y:&y, col:0, view:view)
    let tf4 = NSTextField (frame:NSRect (x:10.0 + OUTLET_WIDTH * 0.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    tf4.stringValue = "Color:"
    tf4.isEditable = false
    tf4.drawsBackground = false
    tf4.isBordered = false
    view.addSubview (tf4)
  //--- Outlet mColorWell
    mColorWell = EBColorWell(frame:NSRect (x:10.0 + OUTLET_WIDTH * 1.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    mColorWell?.setAccessibilityIdentifier ("mColorWell")
    view.addSubview (mColorWell!)
    y -= OUTLET_HEIGHT / 2.0
    y -= OUTLET_HEIGHT
  //--- Text Color (send continously):
  //  createTextFieldForText ("Color (send continously):", y:&y, col:0, view:view)
    let tf5 = NSTextField (frame:NSRect (x:10.0 + OUTLET_WIDTH * 0.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    tf5.stringValue = "Color (send continously):"
    tf5.isEditable = false
    tf5.drawsBackground = false
    tf5.isBordered = false
    view.addSubview (tf5)
  //--- Outlet mContinuousColorWell
    mContinuousColorWell = EBColorWell(frame:NSRect (x:10.0 + OUTLET_WIDTH * 1.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    mContinuousColorWell?.setAccessibilityIdentifier ("mContinuousColorWell")
    view.addSubview (mContinuousColorWell!)
    y -= OUTLET_HEIGHT / 2.0
    y -= OUTLET_HEIGHT
  //--- Text Color Observer:
  //  createTextFieldForText ("Color Observer:", y:&y, col:0, view:view)
    let tf6 = NSTextField (frame:NSRect (x:10.0 + OUTLET_WIDTH * 0.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    tf6.stringValue = "Color Observer:"
    tf6.isEditable = false
    tf6.drawsBackground = false
    tf6.isBordered = false
    view.addSubview (tf6)
  //--- Outlet mObserverColorWell
    mObserverColorWell = EBColorObserverWell(frame:NSRect (x:10.0 + OUTLET_WIDTH * 1.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    mObserverColorWell?.setAccessibilityIdentifier ("mObserverColorWell")
    view.addSubview (mObserverColorWell!)
    y -= OUTLET_HEIGHT / 2.0
    y -= OUTLET_HEIGHT
  //--- Text Date:
  //  createTextFieldForText ("Date:", y:&y, col:0, view:view)
    let tf7 = NSTextField (frame:NSRect (x:10.0 + OUTLET_WIDTH * 0.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    tf7.stringValue = "Date:"
    tf7.isEditable = false
    tf7.drawsBackground = false
    tf7.isBordered = false
    view.addSubview (tf7)
  //--- Outlet mDatePicker
    mDatePicker = EBDatePicker(frame:NSRect (x:10.0 + OUTLET_WIDTH * 1.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    mDatePicker?.setAccessibilityIdentifier ("mDatePicker")
    view.addSubview (mDatePicker!)
    y -= OUTLET_HEIGHT / 2.0
    y -= OUTLET_HEIGHT
  //--- Text Even Integer:
  //  createTextFieldForText ("Even Integer:", y:&y, col:0, view:view)
    let tf8 = NSTextField (frame:NSRect (x:10.0 + OUTLET_WIDTH * 0.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    tf8.stringValue = "Even Integer:"
    tf8.isEditable = false
    tf8.drawsBackground = false
    tf8.isBordered = false
    view.addSubview (tf8)
  //--- Outlet mIntegerTextField
    mIntegerTextField = EBIntField(frame:NSRect (x:10.0 + OUTLET_WIDTH * 1.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    mIntegerTextField?.setAccessibilityIdentifier ("mIntegerTextField")
    view.addSubview (mIntegerTextField!)
    y -= OUTLET_HEIGHT / 2.0
    y -= OUTLET_HEIGHT
  //--- Text Even Integer Observer:
  //  createTextFieldForText ("Even Integer Observer:", y:&y, col:0, view:view)
    let tf9 = NSTextField (frame:NSRect (x:10.0 + OUTLET_WIDTH * 0.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    tf9.stringValue = "Even Integer Observer:"
    tf9.isEditable = false
    tf9.drawsBackground = false
    tf9.isBordered = false
    view.addSubview (tf9)
  //--- Outlet mIntegerObserverTextField
    mIntegerObserverTextField = EBIntObserverField(frame:NSRect (x:10.0 + OUTLET_WIDTH * 1.0, y:y, width:OUTLET_WIDTH, height:OUTLET_HEIGHT))
    mIntegerObserverTextField?.setAccessibilityIdentifier ("mIntegerObserverTextField")
    view.addSubview (mIntegerObserverTextField!)
    y -= OUTLET_HEIGHT / 2.0
  //--- Set pref window content view
    window?.setContentSize (NSSize (width:20.0 + OUTLET_WIDTH * 2.0, height:OUTLET_HEIGHT * (1.5 * 9.0 + 0.5)))
    window?.contentView = view
    if let outlet : Any = self.mColorWell {
      if !(outlet is EBColorWell) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'mColorWell' outlet is not an instance of 'EBColorWell'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'mColorWell' outlet is nil") ;
    }
    if let outlet : Any = self.mContinuousColorWell {
      if !(outlet is EBColorWell) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'mContinuousColorWell' outlet is not an instance of 'EBColorWell'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'mContinuousColorWell' outlet is nil") ;
    }
    if let outlet : Any = self.mDatePicker {
      if !(outlet is EBDatePicker) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'mDatePicker' outlet is not an instance of 'EBDatePicker'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'mDatePicker' outlet is nil") ;
    }
    if let outlet : Any = self.mIntegerObserverTextField {
      if !(outlet is EBIntObserverField) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'mIntegerObserverTextField' outlet is not an instance of 'EBIntObserverField'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'mIntegerObserverTextField' outlet is nil") ;
    }
    if let outlet : Any = self.mIntegerTextField {
      if !(outlet is EBIntField) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'mIntegerTextField' outlet is not an instance of 'EBIntField'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'mIntegerTextField' outlet is nil") ;
    }
    if let outlet : Any = self.mObserverColorWell {
      if !(outlet is EBColorObserverWell) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'mObserverColorWell' outlet is not an instance of 'EBColorObserverWell'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'mObserverColorWell' outlet is nil") ;
    }
    if let outlet : Any = self.myObserverTextField {
      if !(outlet is EBTextObserverField) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'myObserverTextField' outlet is not an instance of 'EBTextObserverField'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'myObserverTextField' outlet is nil") ;
    }
    if let outlet : Any = self.myOtherTextField {
      if !(outlet is EBTextField) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'myOtherTextField' outlet is not an instance of 'EBTextField'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'myOtherTextField' outlet is nil") ;
    }
    if let outlet : Any = self.myTextField {
      if !(outlet is EBTextField) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'myTextField' outlet is not an instance of 'EBTextField'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'myTextField' outlet is nil") ;
    }
  //--------------------------- Install bindings
    myTextField?.bind_value (self.myString_property, file: #file, line: #line, sendContinously:false)
    myOtherTextField?.bind_value (self.myString_property, file: #file, line: #line, sendContinously:true)
    myObserverTextField?.bind_valueObserver (self.myString_property, file: #file, line: #line)
    mContinuousColorWell?.bind_color (self.mColor_property, file: #file, line: #line, sendContinously:true)
    mColorWell?.bind_color (self.mColor_property, file: #file, line: #line, sendContinously:false)
    mObserverColorWell?.bind_colorObserver (self.mColor_property, file: #file, line: #line)
    mDatePicker?.bind_date (self.mDate_property, file: #file, line: #line)
    mIntegerTextField?.bind_value (self.mIntegerValue_property, file: #file, line: #line, sendContinously:true, autoFormatter:true)
    mIntegerObserverTextField?.bind_valueObserver (self.mIntegerValue_property, file: #file, line: #line, autoFormatter:true)
  //--------------------------- Install multiple bindings
  //--------------------------- Array controller
  //--------------------------- Set targets / actions
  //--------------------------- Extern functions
  }

  //····················································································································
  //    applicationWillTerminateAction
  //····················································································································

  @objc func applicationWillTerminateAction (_ : NSNotification) {
  //--------------------------- Array controller
  }

  //····················································································································

}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

