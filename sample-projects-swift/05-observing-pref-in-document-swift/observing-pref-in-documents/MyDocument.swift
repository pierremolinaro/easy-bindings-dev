//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//  THIS FILE IS GENERATED BY EASY BINDINGS, DO NOT MODIFY IT
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import Cocoa

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

@objc(MyDocument) class MyDocument : EBManagedDocument {

  //····················································································································
  //   Transient property: documentFilePath
  //····················································································································

  var documentFilePath_property = EBTransientProperty_String ()

  //····················································································································

  var documentFilePath_property_selection : EBSelection <String> {
    return self.documentFilePath_property.prop
  }

  //····················································································································

    var documentFilePath : String? {
    switch self.documentFilePath_property_selection {
    case .empty, .multiple :
      return nil
    case .single (let v) :
      return v
    }
  }


  //····················································································································
  //    Outlets
  //····················································································································

  @IBOutlet var docStringTextField : EBTextField?
  @IBOutlet var prefStringTextField : EBTextObserverField?
  @IBOutlet var prefTransientStringTextField : EBTextObserverField?
  @IBOutlet var transientConcatStringTextField : EBTextObserverField?

  //····················································································································
  //    Multiple bindings controllers
  //····················································································································


  //····················································································································
  //    Document file path
  //····················································································································
  // Cette méthode est appelée après tout enregistrement, qu'il y ait changement de nom ou pas.

  override var fileModificationDate : Date? {
    get {
      return super.fileModificationDate
    }
    set{
      super.fileModificationDate = newValue
      self.documentFilePath_property.postEvent ()
    }
  }

  //····················································································································

  func computeTransient_documentFilePath () -> String {
    var documentFilePath = ""
    if let url = self.fileURL {
      documentFilePath = url.path
    }
    return documentFilePath
  }

  //····················································································································
  //    populateExplorerWindow
  //····················································································································

  override func populateExplorerWindow (_ y : inout CGFloat, view : NSView) {
  //---
    super.populateExplorerWindow (&y, view:view)
  }

  //····················································································································
  //    windowNibName
  //····················································································································

  override var windowNibName : NSNib.Name {
    return NSNib.Name ("MyDocument")
  }
  
  //····················································································································
  //    rootEntityClassName
  //····················································································································

  override func rootEntityClassName () -> String {
    return "MyRootEntity"
  }

  //····················································································································
  //    rootObject
  //····················································································································

  var rootObject : MyRootEntity { get { return mRootObject as! MyRootEntity } }

  //····················································································································
  //    windowControllerDidLoadNib
  //····················································································································

  override func windowControllerDidLoadNib (_ aController: NSWindowController) {
  //--------------------------- Outlet checking
    if let outlet : Any = self.docStringTextField {
      if !(outlet is EBTextField) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'docStringTextField' outlet is not an instance of 'EBTextField'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'docStringTextField' outlet is nil") ;
    }
    if let outlet : Any = self.prefStringTextField {
      if !(outlet is EBTextObserverField) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'prefStringTextField' outlet is not an instance of 'EBTextObserverField'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'prefStringTextField' outlet is nil") ;
    }
    if let outlet : Any = self.prefTransientStringTextField {
      if !(outlet is EBTextObserverField) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'prefTransientStringTextField' outlet is not an instance of 'EBTextObserverField'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'prefTransientStringTextField' outlet is nil") ;
    }
    if let outlet : Any = self.transientConcatStringTextField {
      if !(outlet is EBTextObserverField) {
        presentErrorWindow (file: #file,
                            line: #line,
                            errorMessage: "the 'transientConcatStringTextField' outlet is not an instance of 'EBTextObserverField'") ;
      }
    }else{
      presentErrorWindow (file: #file,
                          line: #line,
                          errorMessage: "the 'transientConcatStringTextField' outlet is nil") ;
    }
  //--------------------------- Install regular bindings
    docStringTextField?.bind_value (self.rootObject.docString_property, file: #file, line: #line, sendContinously:true)
    prefStringTextField?.bind_valueObserver (g_Preferences!.myPrefString_property, file: #file, line: #line)
    prefTransientStringTextField?.bind_valueObserver (g_Preferences!.prefTransientString_property, file: #file, line: #line)
    transientConcatStringTextField?.bind_valueObserver (self.rootObject.transientConcatString_property, file: #file, line: #line)
  //--------------------------- Install multiple bindings
  //--------------------------- Set targets / actions
  //--------------------------- Update display
    super.windowControllerDidLoadNib (aController)
    flushOutletEvents ()
  }

  //····················································································································
  //   removeWindowController
  //····················································································································

  override func removeUserInterface () {
  //--------------------------- Unbind regular bindings
    docStringTextField?.unbind_value ()
    prefStringTextField?.unbind_valueObserver ()
    prefTransientStringTextField?.unbind_valueObserver ()
    transientConcatStringTextField?.unbind_valueObserver ()
  //--------------------------- Unbind multiple bindings
  //--------------------------- Unbind array controllers
  //--------------------------- Remove targets / actions
  //--------------------------- Clean up outlets
    self.docStringTextField?.ebCleanUp ()
    self.prefStringTextField?.ebCleanUp ()
    self.prefTransientStringTextField?.ebCleanUp ()
    self.transientConcatStringTextField?.ebCleanUp ()
  }

  //····················································································································

}

//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

