//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
//  THIS FILE IS GENERATED BY EASY BINDINGS, DO NOT MODIFY IT
//——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————

import Cocoa

//—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————*

@objc(PMDocument) class PMDocument : EBManagedDocument {

  //····················································································································
  //    Outlets
  //····················································································································

  @IBOutlet var addPathButton : EBButton?
  @IBOutlet var canRemoveTextField : EBTextObserverField?
  @IBOutlet var countItemMessageTextField : EBTextObserverField?
  @IBOutlet var countItemTextField : EBIntObserverField?
  @IBOutlet var decrementButton : EBButton?
  @IBOutlet var evenValueTextField : EBTextObserverField?
  @IBOutlet var incrementButton : EBButton?
  @IBOutlet var mNamesTableView : EBTableView?
  @IBOutlet var mOtherTableView : EBTableView?
  @IBOutlet var mSelectionCountTextField : EBTextObserverField?
  @IBOutlet var mSelectionTableView : EBTableView?
  @IBOutlet var nameDetailTextField : EBTextField?
  @IBOutlet var removePathButton : EBButton?
  @IBOutlet var totalTextField : EBIntObserverField?
  @IBOutlet var valueDetailTextField : EBIntField?

  //····················································································································
  //    Properties
  //····················································································································


  //····················································································································
  //    Transient properties
  //····················································································································

  var selectionCountString = EBTransientProperty_String ()
  var evenValueString = EBTransientProperty_String ()
  var canRemoveString = EBTransientProperty_String ()
  var countItemMessage = EBTransientProperty_String ()
  var total = EBTransientProperty_Int ()

  //····················································································································
  //    Transient arraies
  //····················································································································


  //····················································································································
  //    Array Controllers
  //····················································································································

  var nameController = ArrayController_PMDocument_nameController ()
  var otherController = ArrayController_PMDocument_otherController ()
  var selController = ArrayController_PMDocument_selController ()

  //····················································································································
  //    Selection Controllers
  //····················································································································

  var detailController = SelectionController_PMDocument_detailController ()

  //····················································································································
  //    Custom object Controllers
  //····················································································································


  //····················································································································
  //    populateExplorerWindow
  //····················································································································

  override func populateExplorerWindow (_ y : inout CGFloat, view : NSView) {
    nameController.addExplorer (name: "nameController", y:&y, view:view)
    otherController.addExplorer (name: "otherController", y:&y, view:view)
    selController.addExplorer (name: "selController", y:&y, view:view)
    detailController.addExplorer (name: "detailController", y:&y, view:view)
    super.populateExplorerWindow (&y, view:view)
  }

  //····················································································································
  //    windowNibName
  //····················································································································

  override var windowNibName: String {
    return "PMDocument"
  }

  //····················································································································
  //    rootEntityClassName
  //····················································································································

  override func rootEntityClassName () -> String {
    return "MyRootEntity"
  }

  //····················································································································
  //    rootObject
  //····················································································································

  var rootObject : MyRootEntity { get { return mRootObject as! MyRootEntity } }

  //····················································································································
  //    windowControllerDidLoadNib
  //····················································································································

  override func windowControllerDidLoadNib (_ aController: NSWindowController) {
  //--------------------------- Outlet checking
    if nil == addPathButton {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'addPathButton' outlet is nil") ;
//    }else if !addPathButton!.isKindOfClass (EBButton) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'addPathButton' outlet is not an instance of 'EBButton'") ;
    }
    if nil == canRemoveTextField {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'canRemoveTextField' outlet is nil") ;
//    }else if !canRemoveTextField!.isKindOfClass (EBTextObserverField) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'canRemoveTextField' outlet is not an instance of 'EBTextObserverField'") ;
    }
    if nil == countItemMessageTextField {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'countItemMessageTextField' outlet is nil") ;
//    }else if !countItemMessageTextField!.isKindOfClass (EBTextObserverField) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'countItemMessageTextField' outlet is not an instance of 'EBTextObserverField'") ;
    }
    if nil == countItemTextField {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'countItemTextField' outlet is nil") ;
//    }else if !countItemTextField!.isKindOfClass (EBIntObserverField) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'countItemTextField' outlet is not an instance of 'EBIntObserverField'") ;
    }
    if nil == decrementButton {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'decrementButton' outlet is nil") ;
//    }else if !decrementButton!.isKindOfClass (EBButton) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'decrementButton' outlet is not an instance of 'EBButton'") ;
    }
    if nil == evenValueTextField {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'evenValueTextField' outlet is nil") ;
//    }else if !evenValueTextField!.isKindOfClass (EBTextObserverField) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'evenValueTextField' outlet is not an instance of 'EBTextObserverField'") ;
    }
    if nil == incrementButton {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'incrementButton' outlet is nil") ;
//    }else if !incrementButton!.isKindOfClass (EBButton) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'incrementButton' outlet is not an instance of 'EBButton'") ;
    }
    if nil == mNamesTableView {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'mNamesTableView' outlet is nil") ;
//    }else if !mNamesTableView!.isKindOfClass (EBTableView) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'mNamesTableView' outlet is not an instance of 'EBTableView'") ;
    }
    if nil == mOtherTableView {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'mOtherTableView' outlet is nil") ;
//    }else if !mOtherTableView!.isKindOfClass (EBTableView) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'mOtherTableView' outlet is not an instance of 'EBTableView'") ;
    }
    if nil == mSelectionCountTextField {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'mSelectionCountTextField' outlet is nil") ;
//    }else if !mSelectionCountTextField!.isKindOfClass (EBTextObserverField) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'mSelectionCountTextField' outlet is not an instance of 'EBTextObserverField'") ;
    }
    if nil == mSelectionTableView {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'mSelectionTableView' outlet is nil") ;
//    }else if !mSelectionTableView!.isKindOfClass (EBTableView) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'mSelectionTableView' outlet is not an instance of 'EBTableView'") ;
    }
    if nil == nameDetailTextField {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'nameDetailTextField' outlet is nil") ;
//    }else if !nameDetailTextField!.isKindOfClass (EBTextField) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'nameDetailTextField' outlet is not an instance of 'EBTextField'") ;
    }
    if nil == removePathButton {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'removePathButton' outlet is nil") ;
//    }else if !removePathButton!.isKindOfClass (EBButton) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'removePathButton' outlet is not an instance of 'EBButton'") ;
    }
    if nil == totalTextField {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'totalTextField' outlet is nil") ;
//    }else if !totalTextField!.isKindOfClass (EBIntObserverField) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'totalTextField' outlet is not an instance of 'EBIntObserverField'") ;
    }
    if nil == valueDetailTextField {
      presentErrorWindow (file: #file,
                              line: #line,
                              errorMessage: "the 'valueDetailTextField' outlet is nil") ;
//    }else if !valueDetailTextField!.isKindOfClass (EBIntField) {
//      presentErrorWindow (file: #file,
//                              line: #line,
//                              errorMessage: "the 'valueDetailTextField' outlet is not an instance of 'EBIntField'") ;
    }
  //--------------------------- Array controllers
    nameController.bind_modelAndView (
      model: rootObject.mNames,
      tableViewArray: [mNamesTableView!],
      file: #file,
      line: #line
    )
    otherController.bind_modelAndView (
      model: rootObject.mNames,
      tableViewArray: [mOtherTableView!],
      file: #file,
      line: #line
    )
    selController.bind_modelAndView (
      model: nameController.selectedArray,
      tableViewArray: [mSelectionTableView!],
      file: #file,
      line: #line
    )
  //--------------------------- Selection controllers
    detailController.bind_selection (
      model: nameController.selectedArray,
      file: #file,
      line: #line
    )
  //--------------------------- Custom object controllers
  //--- Transient compute functions
    selectionCountString.readModelFunction = { [weak self] in
      if let unwSelf = self {
        let kind = unwSelf.selController.sortedArray.count.prop.kind ()
        switch kind {
        case .noSelectionKind :
          return .noSelection
        case .multipleSelectionKind :
          return .multipleSelection
        case .singleSelectionKind :
          switch (unwSelf.selController.sortedArray.count.prop) {
          case (.singleSelection (let v0)) :
            return .singleSelection (compute_PMDocument_selectionCountString (v0))
          default :
            return .noSelection
          }
        }
      }else{
        return .noSelection
      }
    }
    evenValueString.readModelFunction = { [weak self] in
      if let unwSelf = self {
        let kind = unwSelf.otherController.sortedArray.count.prop.kind ()
        switch kind {
        case .noSelectionKind :
          return .noSelection
        case .multipleSelectionKind :
          return .multipleSelection
        case .singleSelectionKind :
          switch (unwSelf.otherController.sortedArray.count.prop) {
          case (.singleSelection (let v0)) :
            return .singleSelection (compute_PMDocument_evenValueString (v0))
          default :
            return .noSelection
          }
        }
      }else{
        return .noSelection
      }
    }
    canRemoveString.readModelFunction = { [weak self] in
      if let unwSelf = self {
        let kind = unwSelf.nameController.selectedArray.count.prop.kind ()
        switch kind {
        case .noSelectionKind :
          return .noSelection
        case .multipleSelectionKind :
          return .multipleSelection
        case .singleSelectionKind :
          switch (unwSelf.nameController.selectedArray.count.prop) {
          case (.singleSelection (let v0)) :
            return .singleSelection (compute_PMDocument_canRemoveString (v0))
          default :
            return .noSelection
          }
        }
      }else{
        return .noSelection
      }
    }
    countItemMessage.readModelFunction = { [weak self] in
      if let unwSelf = self {
        let kind = unwSelf.rootObject.mNames.count.prop.kind ()
        switch kind {
        case .noSelectionKind :
          return .noSelection
        case .multipleSelectionKind :
          return .multipleSelection
        case .singleSelectionKind :
          switch (unwSelf.rootObject.mNames.count.prop) {
          case (.singleSelection (let v0)) :
            return .singleSelection (compute_PMDocument_countItemMessage (v0))
          default :
            return .noSelection
          }
        }
      }else{
        return .noSelection
      }
    }
    total.readModelFunction = { [weak self] in
      if let unwSelf = self {
        let kind = unwSelf.rootObject.mNames.prop.kind ()
        switch kind {
        case .noSelectionKind :
          return .noSelection
        case .multipleSelectionKind :
          return .multipleSelection
        case .singleSelectionKind :
          switch (unwSelf.rootObject.mNames.prop) {
          case (.singleSelection (let v0)) :
            return .singleSelection (compute_PMDocument_total (v0))
          default :
            return .noSelection
          }
        }
      }else{
        return .noSelection
      }
    }
  //--- Install property observers for transients
    selController.sortedArray.count.addEBObserver (selectionCountString)
    otherController.sortedArray.count.addEBObserver (evenValueString)
    nameController.selectedArray.count.addEBObserver (canRemoveString)
    rootObject.mNames.count.addEBObserver (countItemMessage)
    self.rootObject.mNames.addEBObserverOf_aValue (total)
  //--- Install regular bindings
    mSelectionCountTextField?.bind_valueObserver (self.selectionCountString, file: #file, line: #line)
    evenValueTextField?.bind_valueObserver (self.evenValueString, file: #file, line: #line)
    canRemoveTextField?.bind_valueObserver (self.canRemoveString, file: #file, line: #line)
    countItemTextField?.bind_valueObserver (self.rootObject.mNames.count, file: #file, line: #line, autoFormatter:false)
    countItemMessageTextField?.bind_valueObserver (self.countItemMessage, file: #file, line: #line)
    totalTextField?.bind_valueObserver (self.total, file: #file, line: #line, autoFormatter:false)
    nameDetailTextField?.bind_value (self.detailController.name, file: #file, line: #line, sendContinously:true)
    valueDetailTextField?.bind_value (self.detailController.aValue, file: #file, line: #line, sendContinously:true, autoFormatter:false)
  //--- Install multiple bindings
    removePathButton?.bind_enabled (
      [self.nameController.selectedArray.count],
      computeFunction:{
        return (self.nameController.selectedArray.count.prop > EBProperty.singleSelection (0))
      },
      file: #file, line: #line
    )
    incrementButton?.bind_enabled (
      [self.rootObject.mNames.count],
      computeFunction:{
        return (self.rootObject.mNames.count.prop > EBProperty.singleSelection (0))
      },
      file: #file, line: #line
    )
    decrementButton?.bind_enabled (
      [self.rootObject.mNames.count],
      computeFunction:{
        return (self.rootObject.mNames.count.prop > EBProperty.singleSelection (0))
      },
      file: #file, line: #line
    )
  //--------------------------- Set targets / actions
    addPathButton?.target = nameController
    addPathButton?.action = #selector (ArrayController_PMDocument_nameController.add (_:))
    removePathButton?.target = nameController
    removePathButton?.action = #selector (ArrayController_PMDocument_nameController.remove (_:))
    incrementButton?.target = self
    incrementButton?.action = #selector (PMDocument.increment (_:))
    decrementButton?.target = self
    decrementButton?.action = #selector (PMDocument.decrement (_:))
  //--------------------------- Update display
    super.windowControllerDidLoadNib (aController)
    flushOutletEvents ()
  }

  //····················································································································
  //   removeWindowController
  //····················································································································

  override func removeUserInterface () {
  //--- Unbind regular bindings
    mSelectionCountTextField?.unbind_valueObserver ()
    evenValueTextField?.unbind_valueObserver ()
    canRemoveTextField?.unbind_valueObserver ()
    countItemTextField?.unbind_valueObserver ()
    countItemMessageTextField?.unbind_valueObserver ()
    totalTextField?.unbind_valueObserver ()
    nameDetailTextField?.unbind_value ()
    valueDetailTextField?.unbind_value ()
  //--- Unbind multiple bindings
    removePathButton?.unbind_enabled ()
    incrementButton?.unbind_enabled ()
    decrementButton?.unbind_enabled ()
  //--- Uninstall compute functions for transients
    selectionCountString.readModelFunction = nil
    evenValueString.readModelFunction = nil
    canRemoveString.readModelFunction = nil
    countItemMessage.readModelFunction = nil
    total.readModelFunction = nil
  //--------------------------- Unbind array controllers
    nameController.unbind_modelAndView ()
    otherController.unbind_modelAndView ()
    selController.unbind_modelAndView ()
  //--------------------------- Unbind selection controllers
    detailController.unbind_selection ()
  //--- Uninstall property observers for transients
    selController.sortedArray.count.removeEBObserver (selectionCountString)
    otherController.sortedArray.count.removeEBObserver (evenValueString)
    nameController.selectedArray.count.removeEBObserver (canRemoveString)
    rootObject.mNames.count.removeEBObserver (countItemMessage)
    self.rootObject.mNames.removeEBObserverOf_aValue (total)
  //--------------------------- Remove targets / actions
    addPathButton?.target = nil
    removePathButton?.target = nil
    incrementButton?.target = nil
    decrementButton?.target = nil
  }

  //····················································································································

}

//—————————————————————————————————————————————————————————————————————————————————————————————————————————————————————*

